globalThis.Federation._mfBind({n:"shell-layout",f:"shell-layout-RYTMHXOv.js",c:"fynapp-shell-mw",s:"fynmesh",e:!1,v:"1.0.0"},["src/middleware"]).register([],function(e,n){"use strict";return{execute:function(){class t{constructor(){this.name="shell-layout",this.autoApplyScope=["fynapp","middleware"],this.loadedFynApps=new Map,this.shellRuntime=null,this.kernel=null,this.fynappContainers=new Map,this.selfManagedApps=new Map,this.reactRoots=new Map,this.regions=new Map([["sidebar",{container:null,fynAppId:null,fynApp:null}],["main",{container:null,fynAppId:null,fynApp:null}]]),this.selectedRegion="main",this.pendingRegionLoad=new Map,this.availableFynApps=[{id:"fynapp-1",name:"FynApp 1 (React 19)",url:"/fynapp-1/dist",framework:"React 19"},{id:"fynapp-1-b",name:"FynApp 1-B (React 19)",url:"/fynapp-1-b/dist",framework:"React 19"},{id:"fynapp-2-react18",name:"FynApp 2 (React 18)",url:"/fynapp-2-react18/dist",framework:"React 18"},{id:"fynapp-6-react",name:"FynApp 6 (React)",url:"/fynapp-6-react/dist",framework:"React"},{id:"fynapp-4-vue",name:"FynApp 4 (Vue)",url:"/fynapp-4-vue/dist",framework:"Vue"},{id:"fynapp-5-preact",name:"FynApp 5 (Preact)",url:"/fynapp-5-preact/dist",framework:"Preact"},{id:"fynapp-7-solid",name:"FynApp 7 (Solid)",url:"/fynapp-7-solid/dist",framework:"Solid"},{id:"fynapp-3-marko",name:"FynApp 3 (Marko)",url:"/fynapp-3-marko/dist",framework:"Marko"}]}async setup(e){return console.log("üè† Shell Layout middleware setup started"),console.log("üè† Setup context:",{fynAppName:e.fynApp.name}),this.kernel=e.kernel,{status:"ready"}}async apply(e){const{fynApp:n,runtime:t}=e;console.log(`üè† Applying Shell Layout middleware to ${n.name}`),console.log("üè† Apply context:",{fynAppName:n.name,isShellApp:"fynapp-shell-mw"===n.name}),"fynapp-shell-mw"===n.name&&(this.shellRuntime=t,this.initializeShellUI()),t.middlewareContext.set(this.name,{loadApp:this.loadApp.bind(this),getAvailableApps:()=>[...this.availableFynApps],getLoadedApps:()=>Array.from(this.loadedFynApps.keys()),loadFynApp:this.loadFynApp.bind(this),unloadFynApp:this.unloadFynApp.bind(this),getLoadedFynApps:()=>Array.from(this.loadedFynApps.keys()),renderIntoShell:this.renderIntoShell.bind(this),isShellAvailable:()=>!!this.regions.get("main")?.container,initializeShell:this.initializeShellUI.bind(this),clearContent:this.clearContent.bind(this),loadIntoRegion:this.loadIntoRegion.bind(this),clearRegion:this.clearRegion.bind(this),getRegions:()=>Array.from(this.regions.keys()),getRegionContent:e=>this.regions.get(e)?.fynAppId||null}),"fynapp-shell-mw"!==n.name&&await this.manageAppLayout(n)}initializeShellUI(){console.log("üè† Starting shell UI initialization");const e=document.getElementById("shell-root");if(!e)return void console.error("‚ùå Shell root element not found");console.log("üè† Found shell-root element, creating UI..."),e.innerHTML=`\n      <style>\n        .shell-layout {\n          display: grid;\n          grid-template-columns: 280px 1fr;\n          grid-template-rows: auto auto 1fr auto;\n          grid-template-areas:\n            "header header"\n            "nav nav"\n            "sidebar main"\n            "footer footer";\n          height: 100vh;\n          background: #f3f4f6;\n        }\n        .shell-footer {\n          grid-area: footer;\n          background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);\n          color: white;\n          padding: 0.5rem 1.5rem;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          font-size: 0.75rem;\n        }\n        .shell-footer-left {\n          display: flex;\n          align-items: center;\n          gap: 1rem;\n        }\n        .shell-footer-right {\n          display: flex;\n          align-items: center;\n          gap: 1rem;\n          opacity: 0.9;\n        }\n        .status-indicator {\n          display: flex;\n          align-items: center;\n          gap: 0.375rem;\n        }\n        .status-dot {\n          width: 8px;\n          height: 8px;\n          border-radius: 50%;\n          background: #4ade80;\n        }\n        .status-dot.loading {\n          background: #fbbf24;\n          animation: pulse 1s ease-in-out infinite;\n        }\n        @keyframes pulse {\n          0%, 100% { opacity: 1; }\n          50% { opacity: 0.5; }\n        }\n        .shell-header {\n          grid-area: header;\n          background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);\n          color: white;\n          padding: 1rem 1.5rem;\n        }\n        .shell-nav {\n          grid-area: nav;\n          background: #ffffff;\n          border-bottom: 1px solid #e5e7eb;\n          padding: 0.75rem 1.5rem;\n          display: flex;\n          align-items: center;\n          flex-wrap: wrap;\n          gap: 0.5rem;\n        }\n        .shell-sidebar {\n          grid-area: sidebar;\n          background: #ffffff;\n          border-right: 1px solid #e5e7eb;\n          overflow-y: auto;\n          display: flex;\n          flex-direction: column;\n        }\n        .shell-sidebar-content {\n          flex: 1;\n          overflow-y: auto;\n        }\n        .shell-main {\n          grid-area: main;\n          overflow: hidden;\n          background: #ffffff;\n        }\n        .region-content {\n          height: 100%;\n          background: #ffffff;\n          display: flex;\n          flex-direction: column;\n        }\n        .region-empty {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          min-height: 200px;\n          color: #9ca3af;\n          text-align: center;\n          padding: 2rem;\n        }\n        .btn-load {\n          padding: 0.375rem 0.75rem;\n          background: #2563eb;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 0.875rem;\n          font-weight: 500;\n        }\n        .btn-load:hover { background: #1d4ed8; }\n        .btn-load:disabled { background: #9ca3af; cursor: not-allowed; }\n        .btn-clear {\n          padding: 0.25rem 0.5rem;\n          background: #dc2626;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 0.75rem;\n          font-weight: 500;\n        }\n        .btn-clear:hover { background: #b91c1c; }\n        .region-select {\n          padding: 0.25rem 0.5rem;\n          border: 1px solid #d1d5db;\n          border-radius: 4px;\n          font-size: 0.875rem;\n        }\n        .fynapp-selector {\n          padding: 0.25rem 0.5rem;\n          border: 1px solid #d1d5db;\n          border-radius: 4px;\n          min-width: 180px;\n        }\n        .loading-indicator {\n          display: inline-block;\n          width: 12px;\n          height: 12px;\n          border: 2px solid #ffffff;\n          border-top-color: transparent;\n          border-radius: 50%;\n          animation: spin 0.8s linear infinite;\n        }\n        @keyframes spin { to { transform: rotate(360deg); } }\n        .fynapp-container {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n          background: #ffffff;\n        }\n        .fynapp-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 0.75rem 1rem;\n          background: #f9fafb;\n          border-bottom: 1px solid #e5e7eb;\n          flex-shrink: 0;\n        }\n        .fynapp-render-target {\n          flex: 1;\n          overflow: auto;\n        }\n      </style>\n      <div class="shell-layout">\n        \x3c!-- Header --\x3e\n        <div class="shell-header">\n          <h1 style="margin: 0; font-size: 1.5rem;">üè† FynMesh Shell Demo</h1>\n          <p style="margin: 0.5rem 0 0 0; opacity: 0.9; font-size: 0.875rem;">\n            Multi-Region Layout with Dynamic FynApp Loading\n          </p>\n        </div>\n\n        \x3c!-- Navigation --\x3e\n        <div class="shell-nav">\n          <label style="font-weight: 500;">Load FynApp:</label>\n          <select id="fynapp-selector" class="fynapp-selector">\n            <option value="">Select a FynApp...</option>\n            ${this.availableFynApps.map(e=>`<option value="${e.url}" data-id="${e.id}">${e.name}</option>`).join("")}\n          </select>\n          <label style="margin-left: 0.5rem;">into:</label>\n          <select id="region-selector" class="region-select">\n            <option value="main" selected>Main</option>\n            <option value="sidebar">Sidebar</option>\n          </select>\n          <button id="load-btn" class="btn-load" disabled>\n            <span id="load-btn-text">Load</span>\n            <span id="load-btn-spinner" class="loading-indicator" style="display: none; margin-left: 0.5rem;"></span>\n          </button>\n          <button id="clear-all-btn" class="btn-load" style="background: #dc2626;">\n            Clear All\n          </button>\n          <div style="margin-left: auto; display: flex; align-items: center; gap: 1rem;">\n            <span style="font-size: 0.875rem; color: #6b7280;">\n              Loaded: <span id="loaded-count">0</span> FynApps\n            </span>\n          </div>\n        </div>\n\n        \x3c!-- Sidebar Region --\x3e\n        <div class="shell-sidebar">\n          <div id="region-sidebar" class="shell-sidebar-content">\n            <div class="region-empty">\n              <p>No FynApp loaded</p>\n              <p style="font-size: 0.75rem;">Select a FynApp and choose "Sidebar" to load here</p>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- Main Region --\x3e\n        <div class="shell-main">\n          <div id="region-main" class="region-content">\n            <div class="region-empty">\n              <h2 style="color: #374151;">Welcome to FynMesh Shell Demo! üöÄ</h2>\n              <p>Select a FynApp from the dropdown above to load it into Main or Sidebar region.</p>\n              <p style="font-size: 0.875rem;">This demonstrates multi-region layout with dynamic FynApp composition.</p>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- Footer Status Bar --\x3e\n        <div class="shell-footer">\n          <div class="shell-footer-left">\n            <div class="status-indicator">\n              <span class="status-dot" id="status-dot"></span>\n              <span id="status-text">Ready</span>\n            </div>\n            <span id="active-fynapp">No active FynApp</span>\n          </div>\n          <div class="shell-footer-right">\n            <span>FynMesh Kernel v1.0.0</span>\n            <span>|</span>\n            <span id="middleware-count">0 middlewares</span>\n          </div>\n        </div>\n      </div>\n    `;const n=this.regions.get("sidebar"),t=this.regions.get("main");n.container=document.getElementById("region-sidebar"),t.container=document.getElementById("region-main"),this.setupEventListeners(),console.log("‚úÖ Shell UI initialized with multi-region layout"),this.autoLoadSidebar()}autoLoadSidebar(){setTimeout(()=>{this.kernel&&(console.log("üìé Auto-loading fynapp-sidebar into sidebar region"),this.loadIntoRegion("/fynapp-sidebar/dist","sidebar").catch(e=>{console.warn("Failed to auto-load sidebar:",e.message)}))},100)}setupEventListeners(){const e=document.getElementById("fynapp-selector"),n=document.getElementById("region-selector"),t=document.getElementById("load-btn"),o=document.getElementById("clear-all-btn");e&&e.addEventListener("change",()=>{t&&(t.disabled=!e.value)}),n&&n.addEventListener("change",()=>{this.selectedRegion=n.value}),t&&t.addEventListener("click",async()=>{if(!e.value)return;const n=e.selectedOptions[0].dataset.id,t=e.value;n&&await this.handleLoadFynApp(n,t,this.selectedRegion)}),o&&o.addEventListener("click",()=>{this.clearContent()})}async handleLoadFynApp(e,n,t="main"){const o=document.getElementById("load-btn"),a=document.getElementById("load-btn-text"),i=document.getElementById("load-btn-spinner");try{o&&(o.disabled=!0),a&&(a.textContent="Loading..."),i&&(i.style.display="inline-block"),console.log(`üîÑ Loading FynApp: ${e} from ${n} into region: ${t}`),await this.loadIntoRegion(n,t)&&console.log(`‚úÖ Successfully loaded FynApp: ${e} into ${t}`)}catch(n){console.error(`‚ùå Failed to load FynApp ${e}:`,n.message);const o=this.regions.get(t);o?.container&&(o.container.innerHTML=`\n          <div class="error-message" style="color: #dc2626; padding: 1rem; border: 1px solid #fecaca; border-radius: 4px; background: #fef2f2;">\n            <h3>Failed to load ${e}</h3>\n            <p>Error: ${n.message}</p>\n          </div>\n        `)}finally{o&&(o.disabled=!1),a&&(a.textContent="Load"),i&&(i.style.display="none")}}clearContent(){this.clearRegion("main"),this.clearRegion("sidebar"),this.loadedFynApps.clear(),this.fynappContainers.clear(),this.updateLoadedCount(),console.log("üßπ All content cleared")}clearRegion(e){const n=this.regions.get(e);if(n?.container){if(n.fynAppId){const e=this.reactRoots.get(n.fynAppId);if(e&&e.unmount)try{e.unmount()}catch(e){console.warn(`Failed to unmount React root for ${n.fynAppId}:`,e)}this.loadedFynApps.delete(n.fynAppId),this.fynappContainers.delete(n.fynAppId),this.reactRoots.delete(n.fynAppId)}n.fynAppId=null,n.fynApp=null,n.container.innerHTML="main"===e?'\n        <div class="region-empty">\n          <h2 style="color: #374151;">Welcome to FynMesh Shell Demo! üöÄ</h2>\n          <p>Select a FynApp from the dropdown above to load it into Main or Sidebar region.</p>\n          <p style="font-size: 0.875rem;">This demonstrates multi-region layout with dynamic FynApp composition.</p>\n        </div>\n      ':'\n        <div class="region-empty">\n          <p>No FynApp loaded</p>\n          <p style="font-size: 0.75rem;">Select a FynApp and choose "Sidebar" to load here</p>\n        </div>\n      ',this.updateLoadedCount(),console.log(`üßπ Region ${e} cleared`)}}loadApp(e){console.log(`üì± loadApp called for ${e}`),this.loadIntoRegion(e,"main").catch(n=>{console.error(`‚ùå Failed to load app ${e}:`,n)})}async loadIntoRegion(e,n){if(!this.kernel)return console.error("‚ùå Kernel not available for dynamic loading"),null;const t=this.regions.get(n);if(!t?.container)return console.error(`‚ùå Region ${n} container not found`),null;try{console.log(`üîÑ Loading FynApp from ${e} into region: ${n}`);const t=e.match(/\/([^\/]+)\/dist\/?$/),o=t?t[1]:e;t&&this.pendingRegionLoad.set(t[1],n),this.updateFooterStatus(o),console.log(`üîÑ Calling kernel.loadFynApp for ${e}...`);let a=null;try{a=await this.kernel.loadFynApp(e),console.log("üîÑ kernel.loadFynApp returned:",a?a.name:"null")}catch(e){throw console.error("‚ùå kernel.loadFynApp threw an error:",e),e}if(a){const e=this.regions.get(n);return console.log(`üîç Region ${n} current state:`,{fynApp:e?.fynApp?.name,fynAppId:e?.fynAppId,loadedFynAppName:a.name}),e?.fynApp&&e.fynAppId===a.name?(console.log(`‚úì Layout already managed for ${a.name} via auto-apply`),this.pendingRegionLoad.delete(a.name)):(console.log(`üîß Manually managing layout for ${a.name} (auto-apply didn't run)`),this.pendingRegionLoad.delete(a.name),this.pendingRegionLoad.set(a.name,n),await this.manageAppLayout(a)),console.log(`‚úÖ Successfully loaded ${a.name} into ${n}`),a}return console.warn(`‚ö†Ô∏è kernel.loadFynApp returned null for ${e}`),null}catch(n){throw console.error(`‚ùå Failed to load FynApp from ${e}:`,n.message),n}}async renderFynAppIntoRegion(e,n){const t=this.regions.get(n);if(!t?.container)return;const o=this.reactRoots.get(e.name);if(o){try{o.unmount(),console.debug(`üßπ Unmounted existing React root for ${e.name}`)}catch(n){console.warn(`Failed to unmount React root for ${e.name}:`,n)}this.reactRoots.delete(e.name)}if(t.container.innerHTML="","sidebar"===n){const n=document.createElement("div");return n.className="fynapp-render-target sidebar-content",n.style.cssText="height: 100%; display: flex; flex-direction: column;",n.id=e.name,t.container.appendChild(n),this.fynappContainers.set(e.name,n),void await this.tryRenderComponent(e,n)}const a=document.createElement("div");a.className="fynapp-container",a.id=`fynapp-container-${e.name}`;const i=document.createElement("div");i.className="fynapp-header",i.innerHTML=`\n      <div>\n        <strong style="color: #374151;">${e.name}</strong>\n        <span style="font-size: 0.75rem; color: #9ca3af; margin-left: 0.5rem;">v${e.version}</span>\n      </div>\n      <button class="btn-clear" data-fynapp="${e.name}" data-region="${n}">‚úï</button>\n    `;const r=document.createElement("div");r.className="fynapp-render-target",r.id=e.name,a.appendChild(i),a.appendChild(r),t.container.appendChild(a),this.fynappContainers.set(e.name,r);const l=i.querySelector(".btn-clear");l&&l.addEventListener("click",()=>{this.clearRegion(n)})}async manageAppLayout(e){const n=this.pendingRegionLoad.get(e.name);if(n){this.pendingRegionLoad.delete(e.name),console.debug(`üé® Managing layout for ${e.name} in ${n} region (via loadIntoRegion)`);const t=this.regions.get(n);return t?.container?(t.fynAppId=e.name,t.fynApp=e,this.loadedFynApps.set(e.name,e),await this.renderFynAppIntoRegion(e,n),this.updateLoadedCount(),void console.debug(`‚úÖ Layout managed for ${e.name} in ${n}`)):void console.warn(`‚ö†Ô∏è Region ${n} container not available for ${e.name}`)}const t=this.regions.get("main");t?.container?(console.debug(`üé® Managing layout for ${e.name} in main region (default)`),t.fynAppId=e.name,t.fynApp=e,this.loadedFynApps.set(e.name,e),await this.renderFynAppIntoRegion(e,"main"),this.updateLoadedCount(),console.debug(`‚úÖ Layout managed for ${e.name}`)):console.warn(`‚ö†Ô∏è Main region container not available for ${e.name}`)}async loadFynApp(e){if(!this.kernel)return console.error("‚ùå Kernel not available for dynamic loading"),null;try{console.log(`üîÑ Loading FynApp from ${e}`);const n=await this.kernel.loadFynApp(e);return n?(console.log(`‚úÖ Successfully loaded and bootstrapped FynApp: ${n.name}`),n):null}catch(n){throw console.error(`‚ùå Failed to load FynApp from ${e}:`,n.message),n}}async unloadFynApp(e){console.log(`üóëÔ∏è Unloading FynApp: ${e}`);for(const[n,t]of this.regions)if(t.fynAppId===e)return this.clearRegion(n),void console.log(`‚úÖ Unloaded FynApp: ${e} from ${n}`);this.loadedFynApps.delete(e),this.fynappContainers.delete(e),this.updateLoadedCount(),console.log(`‚úÖ Unloaded FynApp: ${e}`)}renderIntoShell(e,n){const t=document.getElementById(`fynapp-content-${e}`);t&&("string"==typeof n?t.innerHTML=n:(t.innerHTML="",t.appendChild(n)),t.style.cssText="\n        min-height: 100px;\n        background: #ffffff;\n        border: 1px solid #e5e7eb;\n        border-radius: 4px;\n        padding: 1rem;\n      ",console.debug(`üé® Rendered content for ${e}`))}updateLoadedCount(){const e=document.getElementById("loaded-count");e&&(e.textContent=this.loadedFynApps.size.toString()),this.updateFooterStatus()}updateFooterStatus(e){const n=document.getElementById("status-dot"),t=document.getElementById("status-text"),o=document.getElementById("active-fynapp"),a=document.getElementById("middleware-count");e?(n?.classList.add("loading"),t&&(t.textContent=`Loading ${e}...`)):(n?.classList.remove("loading"),t&&(t.textContent="Ready"));const i=this.regions.get("main");if(o&&(o.textContent=i?.fynApp?`${i.fynApp.name} v${i.fynApp.version}`:"No active FynApp"),a&&this.kernel)try{const e=this.kernel.runTime?.middlewares||{},n=Object.keys(e).length;a.textContent=`${n} middleware${1!==n?"s":""}`}catch{a.textContent="0 middlewares"}}async tryRenderComponent(e,n){try{console.log(`üîç Attempting to load component for ${e.name}`);try{const t=(await e.entry.get("./component"))();if(t&&t.component){console.log(`üé® Found component export for ${e.name}, rendering...`);const o=t.component,a=o.component,i=o.react,r=o.reactDOM;if(!a||"function"!=typeof a)throw console.error(`‚ùå Invalid component for ${e.name}:`,o),new Error("Component is not a valid React component function");if(!i||!r)throw console.error(`‚ùå FynApp ${e.name} must provide react and reactDOM in component export`),new Error("FynApp must provide react and reactDOM dependencies");const l=i.createElement(a,{fynApp:e,runtime:this.shellRuntime});return r.createRoot(n).render(l),void console.log(`‚úÖ Component rendered for ${e.name}`)}console.log(`üìù Component module loaded but no component found for ${e.name}`)}catch(n){console.log(`üìù No component module found for ${e.name} (this is normal for non-component FynApps)`)}this.fallbackRender(n,e.name)}catch(t){console.error(`‚ùå Failed to render component for ${e.name}:`,t),this.fallbackRender(n,e.name)}}canOverrideExecution(e,n){const t=this.regions.get("main");return!!t?.container&&"fynapp-shell-mw"!==e.name}async overrideInitialize(e){const{fynUnit:n,fynApp:t,runtime:o}=e;if(console.debug(`üé≠ Shell middleware overriding initialize for ${t.name}`),o.middlewareContext.set(this.name,{...o.middlewareContext.get(this.name),isShellManaged:!0,renderTarget:this.getOrCreateRenderTarget(t.name),shellMode:"component"}),n.initialize){const e=await n.initialize(o);return console.debug("üé≠ Original initialize returned:",e),{...e,mode:"shell-managed"}}return{status:"ready",mode:"shell-managed"}}async overrideExecute(e){const{fynUnit:n,fynApp:t,runtime:o}=e;console.debug(`üé≠ Shell middleware overriding execute for ${t.name}`);const a=await this.executeWithShellContext(n,o);if(a)await this.handleTypedExecutionResult(t.name,a);else{const e=this.fynappContainers.get(t.name);e&&await this.tryRenderComponent(t,e)}}async executeWithShellContext(e,n){if(!e.execute)return null;try{const t=await e.execute(n);return t&&this.isValidExecutionResult(t)?t:null}catch(e){throw console.error("‚ùå Error in shell-aware execute:",e),e}}isValidExecutionResult(e){return e&&"object"==typeof e&&"string"==typeof e.type&&["component-factory","rendered-content","self-managed","no-render","react-component","render-function"].includes(e.type)}async handleTypedExecutionResult(e,n){switch(console.debug(`üé® Handling typed execution result for ${e}:`,n.type),n.type){case"component-factory":await this.renderComponentFactory(e,n.componentFactory);break;case"rendered-content":this.renderContent(e,n.content);break;case"self-managed":this.handleSelfManaged(e,n);break;case"no-render":console.debug(`üìù ${e} chose not to render: ${n.message||"No reason provided"}`),this.renderNoContent(e,n.message);break;case"react-component":await this.renderReactComponent(e,n);break;case"render-function":await this.renderWithFunction(e,n);break;default:const t=n;console.warn(`ü§∑ Unknown result type for ${e}:`,t),this.fallbackRender(this.getAppContainer(e),e)}}async renderReactComponent(e,n){const t=this.getAppContainer(e),o=n.react||await this.getShellReact(),a=n.reactDOM||await this.getShellReactDOM();try{const i=o.createElement(n.component,{fynAppName:e,runtime:this.shellRuntime,...n.props});let r=this.reactRoots.get(e);r||(r=a.createRoot(t),this.reactRoots.set(e,r)),r.render(i),console.log(`‚úÖ React component rendered for ${e}`)}catch(n){console.error(`‚ùå Failed to render React component for ${e}:`,n),this.fallbackRender(t,e)}}async renderWithFunction(e,n){const t=this.getAppContainer(e);try{await n.render(t),console.log(`‚úÖ Render function executed for ${e}`)}catch(n){console.error(`‚ùå Failed to execute render function for ${e}:`,n),this.fallbackRender(t,e)}}async renderComponentFactory(e,n){const t=this.getAppContainer(e),o=await this.getShellReact(),a=await this.getShellReactDOM();try{const{component:i,props:r={}}=n(o),l=o.createElement(i,{fynAppName:e,...r});let s=this.reactRoots.get(e);s||(s=a.createRoot(t),this.reactRoots.set(e,s)),s.render(l),console.log(`‚úÖ Component factory rendered for ${e}`)}catch(n){console.error(`‚ùå Failed to render component factory for ${e}:`,n),this.fallbackRender(t,e)}}renderContent(e,n){const t=this.getAppContainer(e);"string"==typeof n?t.innerHTML=n:(t.innerHTML="",t.appendChild(n)),console.debug(`üé® Content rendered for ${e}`)}handleSelfManaged(e,n){console.debug(`üîß ${e} is self-managing DOM in target:`,n.target),this.selfManagedApps.set(e,n)}renderNoContent(e,n){this.getAppContainer(e).innerHTML=`\n      <div style="padding: 1rem; text-align: center; color: #6b7280;">\n        <p>üì¶ ${e}</p>\n        <p><small>${n||"No content to render"}</small></p>\n      </div>\n    `}getOrCreateRenderTarget(e){return this.getAppContainer(e)}getAppContainer(e){const n=this.fynappContainers.get(e);if(n)return n;const t=document.createElement("div");return t.className="fynapp-render-target",this.fynappContainers.set(e,t),t}async getShellReact(){return(await n.import("esm-react")).default}async getShellReactDOM(){return(await n.import("esm-react-dom")).default}fallbackRender(e,n){e.innerHTML=`\n      <div style="padding: 1rem; text-align: center; color: #6b7280;">\n        <p>üì¶ ${n} loaded</p>\n        <p><small>Component will render here if available</small></p>\n      </div>\n    `}}e("ShellLayoutMiddleware",t),e("__middleware__ShellLayout",new t)}}});
//# sourceMappingURL=shell-layout-RYTMHXOv.js.map

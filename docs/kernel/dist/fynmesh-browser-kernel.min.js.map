{"version":3,"file":"fynmesh-browser-kernel.min.js","sources":["../src/event-target.ts","../src/kernel-core.ts","../src/share-scope.ts","../src/util.ts","../src/browser-kernel.ts","../src/browser.ts"],"sourcesContent":[null,null,null,null,null,null],"names":["FynEventTarget","EventTarget","constructor","super","on","type","handler","options","this","addEventListener","once","xh","evt","removeEventListener","isEventListener","handleEvent","DummyMiddlewareReg","regKey","FynMeshKernelCore","version","shareScopeName","deferInvoke","middlewareReady","Map","events","runTime","appsLoaded","middlewares","event","handleMiddlewareReady","emitAsync","dispatchEvent","name","status","cc","share","detail","_share","set","reg","fullKey","resumes","i","length","callContexts","count","deferCC","runtime","push","filter","Boolean","resume","callMiddlewares","console","debug","Date","now","registerMiddleware","mwReg","hostFynApp","log","middleware","autoApplyScope","versionMap","Object","create","default","autoApplyMiddlewares","fynapp","includes","join","getMiddleware","provider","middlewareKey","initRunTime","data","cleanContainerName","replace","loadExposeModule","fynApp","exposeName","loadMiddlewares","container","entry","$E","exposedModule","get","mwExports","exportName","exportValue","entries","startsWith","mwName","exposes","__name","loadFynAppBasics","fynAppEntry","init","packageName","middlewareContext","factory","config","setup","createFynModuleRuntime","invokeFynModule","fynMod","executionOverride","findExecutionOverride","context","meta","info","kernel","overrideInitialize","initialize","initResult","overrideExecute","execute","executeResult","metadata","fynModule","targetMiddlewares","keys","some","key","canOverrideExecution","checkSingleMiddlewareReady","has","checkMiddlewareReady","ccs","checkDeferCalls","tries","error","Error","mw","result","apply","useMiddlewareOnFynModule","__middlewareMeta","map","undefined","applyAutoScopeMiddlewares","shouldApply","bootstrapFynApp","mainFynModule","main","buildFynAppUrl","baseUrl","entryFile","urlPath","fillSlash","endsWith","urlJoin","BrowserKernel","loadFynApp","loadId","Federation","globalThis","import","err","fynMeshKernel","createBrowserKernel"],"mappings":"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"}
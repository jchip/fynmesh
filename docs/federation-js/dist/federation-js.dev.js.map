{"version":3,"file":"federation-js.dev.js","sources":["../../../../../rollup-federation/federation-js/src/semver.ts","../../../../../rollup-federation/federation-js/src/utils.ts","../../../../../rollup-federation/federation-js/src/federation-js.ts"],"sourcesContent":["// @ts-nocheck\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\n/**\n * @param {string} str version string\n * @returns {(string|number|undefined|[])[]} parsed version\n */\nexport const parseVersion = (\n  str: string\n): (string | number | undefined | [])[] => {\n  var splitAndConvert = function (str) {\n    return str.split(\".\").map(function (item) {\n      // eslint-disable-next-line eqeqeq\n      return +item == item ? +item : item;\n    });\n  };\n  var match = /^([^-+]+)?(?:-([^+]+))?(?:\\+(.+))?$/.exec(str);\n  var ver: (string | number | undefined | [])[] = match[1]\n    ? splitAndConvert(match[1])\n    : [];\n  if (match[2]) {\n    ver.length++;\n    ver.push.apply(ver, splitAndConvert(match[2]));\n  }\n  if (match[3]) {\n    ver.push([]);\n    ver.push.apply(ver, splitAndConvert(match[3]));\n  }\n  return ver;\n};\n\n/* eslint-disable eqeqeq */\n/**\n * @param {string} a version\n * @param {string} b version\n * @returns {boolean} true, iff a < b\n */\nexport const versionLt = (_a: string, _b: string): boolean => {\n  var a = parseVersion(_a);\n  var b = parseVersion(_b);\n  var i = 0;\n  for (; ;) {\n    // a       b  EOA     object  undefined  number  string\n    // EOA        a == b  a < b   b < a      a < b   a < b\n    // object     b < a   (0)     b < a      a < b   a < b\n    // undefined  a < b   a < b   (0)        a < b   a < b\n    // number     b < a   b < a   b < a      (1)     a < b\n    // string     b < a   b < a   b < a      b < a   (1)\n    // EOA end of array\n    // (0) continue on\n    // (1) compare them via \"<\"\n\n    // Handles first row in table\n    if (i >= a.length) return i < b.length && (typeof b[i])[0] != \"u\";\n\n    var aValue = a[i];\n    var aType = (typeof aValue)[0];\n\n    // Handles first column in table\n    if (i >= b.length) return aType == \"u\";\n\n    var bValue = b[i];\n    var bType = (typeof bValue)[0];\n\n    if (aType == bType) {\n      if (aType != \"o\" && aType != \"u\" && aValue != bValue) {\n        return aValue < bValue;\n      }\n      i++;\n    } else {\n      // Handles remaining cases\n      if (aType == \"o\" && bType == \"n\") return true;\n      return bType == \"s\" || aType == \"u\";\n    }\n  }\n};\n/* eslint-enable eqeqeq */\n\n/**\n * @param {string} str range string\n * @returns {SemVerRange} parsed range\n */\nexport const parseRange = (str: string) => {\n  const splitAndConvert = (str: string) => {\n    return str\n      .split(\".\")\n      .map((item) => (item !== \"NaN\" && `${+item}` === item ? +item : item));\n  };\n  // see https://docs.npmjs.com/misc/semver#range-grammar for grammar\n  const parsePartial = (str) => {\n    const match = /^([^-+]+)?(?:-([^+]+))?(?:\\+(.+))?$/.exec(str);\n    /** @type {(string|number|undefined|[])[]} */\n    const ver = match[1] ? [0, ...splitAndConvert(match[1])] : [0];\n    if (match[2]) {\n      ver.length++;\n      ver.push.apply(ver, splitAndConvert(match[2]));\n    }\n\n    // remove trailing any matchers\n    let last: string = ver[ver.length - 1] as string;\n    while (\n      ver.length &&\n      (last === undefined || /^[*xX]$/.test(/** @type {string} */ last))\n    ) {\n      ver.pop();\n      last = ver[ver.length - 1] as string;\n    }\n\n    return ver;\n  };\n  const toFixed = (range) => {\n    if (range.length === 1) {\n      // Special case for \"*\" is \"x.x.x\" instead of \"=\"\n      return [0];\n    } else if (range.length === 2) {\n      // Special case for \"1\" is \"1.x.x\" instead of \"=1\"\n      return [1, ...range.slice(1)];\n    } else if (range.length === 3) {\n      // Special case for \"1.2\" is \"1.2.x\" instead of \"=1.2\"\n      return [2, ...range.slice(1)];\n    } else {\n      return [range.length, ...range.slice(1)];\n    }\n  };\n  const negate = (range) => {\n    return [-range[0] - 1, ...range.slice(1)];\n  };\n  const parseSimple = (str) => {\n    // simple       ::= primitive | partial | tilde | caret\n    // primitive    ::= ( '<' | '>' | '>=' | '<=' | '=' | '!' ) ( ' ' ) * partial\n    // tilde        ::= '~' ( ' ' ) * partial\n    // caret        ::= '^' ( ' ' ) * partial\n    const match = /^(\\^|~|<=|<|>=|>|=|v|!)/.exec(str);\n    const start = match ? match[0] : \"\";\n    const remainder = parsePartial(\n      start.length ? str.slice(start.length).trim() : str.trim()\n    );\n    switch (start) {\n      case \"^\":\n        if (remainder.length > 1 && remainder[1] === 0) {\n          if (remainder.length > 2 && remainder[2] === 0) {\n            return [3, ...remainder.slice(1)];\n          }\n          return [2, ...remainder.slice(1)];\n        }\n        return [1, ...remainder.slice(1)];\n      case \"~\":\n        return [2, ...remainder.slice(1)];\n      case \">=\":\n        return remainder;\n      case \"=\":\n      case \"v\":\n      case \"\":\n        return toFixed(remainder);\n      case \"<\":\n        return negate(remainder);\n      case \">\": {\n        // and( >=, not( = ) ) => >=, =, not, and\n        const fixed = toFixed(remainder);\n        // eslint-disable-next-line no-sparse-arrays\n        return [, fixed, 0, remainder, 2];\n      }\n      case \"<=\":\n        // or( <, = ) => <, =, or\n        // eslint-disable-next-line no-sparse-arrays\n        return [, toFixed(remainder), negate(remainder), 1];\n      case \"!\": {\n        // not =\n        const fixed = toFixed(remainder);\n        // eslint-disable-next-line no-sparse-arrays\n        return [, fixed, 0];\n      }\n      default:\n        throw new Error(\"Unexpected start value\");\n    }\n  };\n  const combine = (items, fn) => {\n    if (items.length === 1) return items[0];\n    const arr = [];\n    for (const item of items.slice().reverse()) {\n      if (0 in item) {\n        arr.push(item);\n      } else {\n        arr.push(...item.slice(1));\n      }\n    }\n    // eslint-disable-next-line no-sparse-arrays\n    return [, ...arr, ...items.slice(1).map(() => fn)];\n  };\n  const parseRange = (str) => {\n    // range      ::= hyphen | simple ( ' ' ( ' ' ) * simple ) * | ''\n    // hyphen     ::= partial ( ' ' ) * ' - ' ( ' ' ) * partial\n    const items = str.split(/\\s+-\\s+/);\n    if (items.length === 1) {\n      const items = str\n        .trim()\n        .split(/(?<=[-0-9A-Za-z])\\s+/g)\n        .map(parseSimple);\n      return combine(items, 2);\n    }\n    const a = parsePartial(items[0]);\n    const b = parsePartial(items[1]);\n    // >=a <=b => and( >=a, or( <b, =b ) ) => >=a, <b, =b, or, and\n    // eslint-disable-next-line no-sparse-arrays\n    return [, toFixed(b), negate(b), 1, a, 2];\n  };\n  const parseLogicalOr = (str) => {\n    // range-set  ::= range ( logical-or range ) *\n    // logical-or ::= ( ' ' ) * '||' ( ' ' ) *\n    const items = str.split(/\\s*\\|\\|\\s*/).map(parseRange);\n    return combine(items, 1);\n  };\n  return parseLogicalOr(str);\n};\n\n/* eslint-disable eqeqeq */\nexport const rangeToString = (range) => {\n  var fixCount = range[0];\n  var str = \"\";\n  if (range.length === 1) {\n    return \"*\";\n  } else if (fixCount + 0.5) {\n    str +=\n      fixCount == 0\n        ? \">=\"\n        : fixCount == -1\n          ? \"<\"\n          : fixCount == 1\n            ? \"^\"\n            : fixCount == 2\n              ? \"~\"\n              : fixCount > 0\n                ? \"=\"\n                : \"!=\";\n    var needDot = 1;\n    // eslint-disable-next-line no-redeclare\n    for (var i = 1; i < range.length; i++) {\n      var item = range[i];\n      var t = (typeof item)[0];\n      needDot--;\n      str +=\n        t == \"u\"\n          ? // undefined: prerelease marker, add an \"-\"\n          \"-\"\n          : // number or string: add the item, set flag to add an \".\" between two of them\n          (needDot > 0 ? \".\" : \"\") + ((needDot = 2), item);\n    }\n    return str;\n  } else {\n    var stack = [];\n    // eslint-disable-next-line no-redeclare\n    for (var i = 1; i < range.length; i++) {\n      // eslint-disable-next-line no-redeclare\n      var item = range[i];\n      stack.push(\n        item === 0\n          ? \"not(\" + pop() + \")\"\n          : item === 1\n            ? \"(\" + pop() + \" || \" + pop() + \")\"\n            : item === 2\n              ? stack.pop() + \" \" + stack.pop()\n              : rangeToString(item)\n      );\n    }\n    return pop();\n  }\n  function pop() {\n    return stack.pop().replace(/^\\((.+)\\)$/, \"$1\");\n  }\n};\n/* eslint-enable eqeqeq */\n\n/* eslint-disable eqeqeq */\n/**\n * @param {SemVerRange} range version range\n * @param {string} version the version\n * @returns {boolean} if version satisfy the range\n */\nexport const satisfy = (range, version) => {\n  if (0 in range) {\n    version = parseVersion(version);\n    var fixCount = /** @type {number} */ range[0];\n    // when negated is set it swill set for < instead of >=\n    var negated = fixCount < 0;\n    if (negated) fixCount = -fixCount - 1;\n    for (var i = 0, j = 1, isEqual = true; ; j++, i++) {\n      // cspell:word nequal nequ\n\n      // when isEqual = true:\n      // range         version: EOA/object  undefined  number    string\n      // EOA                    equal       block      big-ver   big-ver\n      // undefined              bigger      next       big-ver   big-ver\n      // number                 smaller     block      cmp       big-cmp\n      // fixed number           smaller     block      cmp-fix   differ\n      // string                 smaller     block      differ    cmp\n      // fixed string           smaller     block      small-cmp cmp-fix\n\n      // when isEqual = false:\n      // range         version: EOA/object  undefined  number    string\n      // EOA                    nequal      block      next-ver  next-ver\n      // undefined              nequal      block      next-ver  next-ver\n      // number                 nequal      block      next      next\n      // fixed number           nequal      block      next      next   (this never happens)\n      // string                 nequal      block      next      next\n      // fixed string           nequal      block      next      next   (this never happens)\n\n      // EOA end of array\n      // equal (version is equal range):\n      //   when !negated: return true,\n      //   when negated: return false\n      // bigger (version is bigger as range):\n      //   when fixed: return false,\n      //   when !negated: return true,\n      //   when negated: return false,\n      // smaller (version is smaller as range):\n      //   when !negated: return false,\n      //   when negated: return true\n      // nequal (version is not equal range (> resp <)): return true\n      // block (version is in different prerelease area): return false\n      // differ (version is different from fixed range (string vs. number)): return false\n      // next: continues to the next items\n      // next-ver: when fixed: return false, continues to the next item only for the version, sets isEqual=false\n      // big-ver: when fixed || negated: return false, continues to the next item only for the version, sets isEqual=false\n      // next-nequ: continues to the next items, sets isEqual=false\n      // cmp (negated === false): version < range => return false, version > range => next-nequ, else => next\n      // cmp (negated === true): version > range => return false, version < range => next-nequ, else => next\n      // cmp-fix: version == range => next, else => return false\n      // big-cmp: when negated => return false, else => next-nequ\n      // small-cmp: when negated => next-nequ, else => return false\n\n      var rangeType = j < range.length ? (typeof range[j])[0] : \"\";\n\n      var versionValue;\n      var versionType;\n\n      // Handles first column in both tables (end of version or object)\n      if (\n        i >= version.length ||\n        ((versionValue = version[i]),\n          (versionType = (typeof versionValue)[0]) == \"o\")\n      ) {\n        // Handles nequal\n        if (!isEqual) return true;\n        // Handles bigger\n        if (rangeType == \"u\") return j > fixCount && !negated;\n        // Handles equal and smaller: (range === EOA) XOR negated\n        return (rangeType == \"\") != negated; // equal + smaller\n      }\n\n      // Handles second column in both tables (version = undefined)\n      if (versionType == \"u\") {\n        if (!isEqual || rangeType != \"u\") {\n          return false;\n        }\n      }\n\n      // switch between first and second table\n      else if (isEqual) {\n        // Handle diagonal\n        if (rangeType == versionType) {\n          if (j <= fixCount) {\n            // Handles \"cmp-fix\" cases\n            if (versionValue != range[j]) {\n              return false;\n            }\n          } else {\n            // Handles \"cmp\" cases\n            if (negated ? versionValue > range[j] : versionValue < range[j]) {\n              return false;\n            }\n            if (versionValue != range[j]) isEqual = false;\n          }\n        }\n\n        // Handle big-ver\n        else if (rangeType != \"s\" && rangeType != \"n\") {\n          if (negated || j <= fixCount) return false;\n          isEqual = false;\n          j--;\n        }\n\n        // Handle differ, big-cmp and small-cmp\n        else if (j <= fixCount || versionType < rangeType != negated) {\n          return false;\n        } else {\n          isEqual = false;\n        }\n      } else {\n        // Handles all \"next-ver\" cases in the second table\n        if (rangeType != \"s\" && rangeType != \"n\") {\n          isEqual = false;\n          j--;\n        }\n\n        // next is applied by default\n      }\n    }\n  }\n  /** @type {(boolean | number)[]} */\n  var stack = [];\n  var p = stack.pop.bind(stack);\n  // eslint-disable-next-line no-redeclare\n  for (var i = 1; i < range.length; i++) {\n    var item = /** @type {SemVerRange | 0 | 1 | 2} */ range[i];\n    stack.push(\n      item == 1\n        ? p() | p()\n        : item == 2\n          ? p() & p()\n          : item\n            ? satisfy(item, version)\n            : !p()\n    );\n  }\n  return !!p();\n};\n/* eslint-enable eqeqeq */\n","export const hasDocument = typeof document !== \"undefined\";\n\n/**\n *\n * @returns\n */\nexport function getLastScript() {\n  if (hasDocument && document.readyState === \"loading\") {\n    const scripts = document.querySelectorAll(\"script[src]\");\n    const lastScript = scripts[scripts.length - 1];\n    return lastScript;\n  }\n  return undefined;\n}\n\n/**\n *\n * @returns\n */\nexport function getCurrentScript() {\n  return hasDocument && (document.currentScript || getLastScript());\n}\n\n/**\n *\n * @param id\n * @returns\n */\nexport function startsWithDotSlash(id: string) {\n  return id && id.startsWith(\"./\");\n}\n\n/**\n *\n * @param obj\n * @param k\n * @param elem\n */\nexport function addElementToArrayInObject<T>(\n  obj: T,\n  k: string,\n  elem: unknown\n): boolean {\n  return !(obj[k] || (obj[k] = [])).includes(elem) && obj[k].push(elem);\n}\n\n/**\n *\n * @param obj\n * @returns first key of the object\n */\nexport function firstObjectKey(obj: any) {\n  return Object.keys(obj)[0];\n}\n\n/**\n *\n * @param name\n * @returns container id\n */\nexport function containerNameToId(name: string): string {\n  const containerSigPrefix = \"__mf_container_\";\n\n  if (name.startsWith(containerSigPrefix)) {\n    return name;\n  }\n  return containerSigPrefix + name;\n}\n\n/**\n *\n * @param T\n * @returns new object\n */\nexport function createObject<T = any>(): T {\n  return Object.create(null);\n}\n","// import \"./global-this-polyfill.ts\";\n\nimport { satisfy, parseRange } from \"./semver.ts\";\nimport type {\n  MFBinding,\n  BindOptions,\n  ShareInfo,\n  ShareMeta,\n  ShareScope,\n  ShareSource,\n  ShareStore,\n  RegDef,\n  ShareConfig,\n  AddShareOptions,\n  ShareSpec,\n} from \"./types.js\";\n\nimport {\n  getCurrentScript,\n  startsWithDotSlash,\n  createObject,\n  containerNameToId,\n  addElementToArrayInObject,\n  firstObjectKey,\n} from \"./utils.ts\";\n\nconst _global = globalThis;\n\n/**\n *\n */\nclass FederationJS {\n  private _System: any;\n  private $C: Record<string, Record<string, Container>>;\n  private $B: Record<string, MFBinding>;\n  private $SS: ShareStore;\n  private sysResolve: any;\n  private sysRegister: any;\n  private sysInstantiate: any;\n  /** ID to URL mapping */\n  private $iU: Record<string, Record<string, RegDef>>;\n  /** URL to ID mapping */\n  private $uI: Record<string, { id: string; version: string }[]>;\n  /** pending module load waiting for container */\n  private $pC: Record<string, any>;\n  randomSource?: boolean;\n\n  /**\n   *\n   * @param System\n   */\n  constructor(_System?: any) {\n    const S = /*@__MANGLE_PROP__*/ (this._System = _System || _global.System);\n    const systemJSPrototype = S.constructor.prototype;\n    /*@__MANGLE_PROP__*/\n    this.sysResolve = systemJSPrototype.resolve;\n    /*@__MANGLE_PROP__*/\n    this.sysRegister = systemJSPrototype.register;\n    /*@__MANGLE_PROP__*/\n    this.sysInstantiate = systemJSPrototype.instantiate;\n    this.$iU = createObject();\n    this.$uI = createObject();\n    this.$pC = createObject();\n    this.$C = createObject();\n\n    const federation = this;\n\n    systemJSPrototype.resolve = function (\n      id: string,\n      parentURL: string,\n      meta: unknown\n    ): string {\n      const rd = federation.getRegDefForId(id);\n\n      if (rd) {\n        // module already available and registered with its definitions\n        // so just return the id to do lookup, and not url for fetching\n        if (rd.def) {\n          return id;\n        }\n        console.debug(\n          \"resolve with id \" + id + \" to url\",\n          id,\n          rd.url,\n          \"parentURL\",\n          parentURL,\n          \"meta\",\n          meta\n        );\n        if (rd.url) {\n          return rd.url;\n        }\n      }\n\n      const r = federation.resolve(id, parentURL, meta);\n      return r;\n    };\n\n    systemJSPrototype.instantiate = function (\n      url: string,\n      _parentURL: string,\n      _meta: any\n    ) {\n      const rd = federation.getRegDefForId(url);\n      const def = rd && rd.def;\n      if (def) {\n        if (def !== 1) {\n          rd.def = 1;\n          return def;\n        }\n        console.error(\"reg def already used for\", url);\n      }\n\n      return federation.sysInstantiate.apply(federation._System, arguments);\n    };\n\n    // const _import = systemJSPrototype.import;\n    // systemJSPrototype.import = function (\n    //   id: string,\n    //   parentUrl: string,\n    //   meta: any\n    // ) {\n    //   const url = federation.getUrlForId(id);\n    //   if (url) {\n    //     return _import.call(this, url, parentUrl, meta);\n    //   }\n    //   return _import.call(this, id, parentUrl, meta);\n    // };\n\n    this.$B = createObject();\n    this.$SS = createObject();\n  }\n\n  /**\n   * Try to find a container that has the exposed id\n   *\n   * In the case where some code import an exposed module with the id like \"./main\", and if\n   * that module has other dependencies, then SystemJS will load those using the exposed id\n   * as parentURL, in the \"./main\" form, and this will confused the entire system because\n   * SystemJS can't find resolve to a full URL.  So we try to assume that the id is an exposed\n   * module, and search all containers that has that exposed id.\n   *\n   * @param id\n   * @returns\n   */\n  /*@__MANGLE_PROP__*/\n  private searchContainerForExposedId(id: string): Container | undefined {\n    for (const containerId in this.$C) {\n      const containerMap = this.$C[containerId];\n      for (const ver in containerMap) {\n        if (ver !== \"_\") {\n          const container = containerMap[ver];\n          for (const exp in container.$E) {\n            if (container.$E[exp] === id) {\n              return container;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   *\n   * @param id\n   * @param parentURL\n   * @param meta\n   * @returns\n   */\n  resolve(id: string, parentURL: string, meta?: unknown): string {\n    console.debug(\"## resolve - id\", id, \"parentURL\", parentURL, \"meta\", meta);\n    const federation = this;\n    const { id: parentId, version: parentVersion } =\n      federation.getIdForUrl(parentURL) || {};\n    let container =\n      parentId && federation._mfGetContainer(parentId, parentVersion);\n    // SystemJS is trying load dependencies of an exposed module with the id like \"./main\"\n    // We have to find the container that might exposed that id and use it to form the full\n    // parentURL.\n    if (!container && startsWithDotSlash(parentURL)) {\n      container = this.searchContainerForExposedId(parentURL);\n      if (container) {\n        console.debug(\n          \" >> found container for exposed id\",\n          parentURL,\n          container\n        );\n        parentURL = federation.sysResolve.call(\n          federation._System,\n          parentURL,\n          container.url,\n          meta\n        );\n      }\n    }\n\n    let rvmMapData: string[];\n    if (!container) {\n      const binded = federation.getBindForId(parentId || parentURL);\n      container =\n        binded &&\n        federation._mfGetContainer(binded.container, binded.containerVersion);\n      if (!container) {\n        console[parentId ? \"warn\" : \"debug\"](\n          \" >> Unable to find container for id \" +\n            id +\n            \" parentId \" +\n            parentId +\n            \" parentURL \" +\n            parentURL\n        );\n        return federation.sysResolve.call(this, id, parentURL, meta);\n      }\n      rvmMapData = binded.mapData;\n      console.debug(\n        \" >> resolve bind parent of\",\n        id,\n        binded,\n        `\\n  container`,\n        container,\n        \"\\n  get original import name from id to check for federation\",\n        id,\n        \"\\n  rvmMapData\",\n        rvmMapData\n      );\n    }\n\n    // time to federate\n    // 1. get original import name from id\n\n    const { n: importName, v: importVersion } = federation.findImportSpecFromId(\n      id,\n      container\n    );\n\n    if (!importName) {\n      console.debug(\n        \" >> no import name found for id \" +\n          id +\n          \", so treat it as no federation\"\n      );\n      return federation.sysResolve.call(\n        federation._System,\n        id,\n        parentURL,\n        meta\n      );\n    }\n\n    // 2. get required version from container.$SC.rvm and binded.mapData\n\n    console.debug(\n      \"  looking for required version - importName\",\n      importName,\n      \"\\n  container\",\n      container,\n      \"\\n  rvmMapData\",\n      rvmMapData\n    );\n    const requiredVersion = federation.matchRvm(\n      importName,\n      container,\n      rvmMapData\n    );\n\n    // 3. match existing loaded module from shared info\n\n    const scope = federation.$SS[container.scope];\n    const shareMeta = scope && scope[importName];\n\n    console.debug(\n      \"  shareMeta\",\n      shareMeta,\n      \"\\n  requiredVersion\",\n      requiredVersion,\n      \"\\n  importVersion\",\n      importVersion\n    );\n\n    // First try to find a loaded module that satisfies the version requirement\n    let matchedVersion = requiredVersion\n      ? federation.semverMatch(\n          importName,\n          shareMeta,\n          requiredVersion,\n          true,\n          importVersion\n        )\n      : importVersion;\n\n    // If no loaded module found but required version exists, try again without loadedOnly restriction\n    if (!matchedVersion && shareMeta) {\n      matchedVersion = federation.semverMatch(\n        importName,\n        shareMeta,\n        requiredVersion,\n        false,\n        importVersion\n      );\n      console.debug(\n        \"  No loaded module found for\",\n        importName,\n        \"- falling back to unloaded module with version\",\n        matchedVersion\n      );\n    }\n\n    const shareInfo = shareMeta && shareMeta[matchedVersion];\n    // || firstObjectKey(shareMeta)\n\n    let shareId = id;\n    let shareParentUrl = parentURL;\n\n    if (shareInfo) {\n      if (shareInfo.url) {\n        console.debug(\"found shared\", importName, \"url\", shareInfo.url);\n        federation.addIdUrlMap(id, shareInfo.url);\n        return shareInfo.url;\n      }\n\n      const source = federation.pickShareSource(shareInfo);\n\n      source.loaded = true;\n      // The container registered the share info, so the id is\n      // relative to the container's URL.\n      shareParentUrl = federation.getUrlForId(\n        containerNameToId(source.container),\n        source.version\n      );\n      shareId = source.id;\n    }\n\n    const resolved = federation.sysResolve.call(\n      this,\n      shareId,\n      shareParentUrl,\n      meta\n    );\n\n    federation.addIdUrlMap(shareId, resolved);\n    if (id !== shareId) {\n      federation.addIdUrlMap(id, resolved);\n    }\n\n    if (shareInfo) {\n      shareInfo.url = resolved;\n    }\n\n    return resolved;\n  }\n\n  /**\n   *\n   * @param id\n   * @param container\n   * @returns\n   */\n  /*@__MANGLE_PROP__*/\n  private findImportSpecFromId(id: string, container: Container) {\n    const _SS = container.$SC;\n    let importName = \"\";\n    let importVersion = \"\";\n\n    if (_SS[id]) {\n      // import is using original import id\n      importName = id;\n      importVersion = firstObjectKey(_SS[id].versions);\n    } else {\n      for (const name in _SS) {\n        const _sm = _SS[name];\n        for (const version in _sm.versions) {\n          const _si = _sm.versions[version];\n          if (id === _si.id) {\n            console.debug(\n              \"found import name\",\n              name,\n              \"version\",\n              version,\n              \"for id\",\n              id\n            );\n            importName = name;\n            importVersion = version;\n            break;\n          }\n        }\n      }\n    }\n\n    return { n: importName, v: importVersion };\n  }\n\n  /**\n   *\n   * @param importName\n   * @param container\n   * @param rvmMapData\n   * @returns\n   */\n  /*@__MANGLE_PROP__*/\n  private matchRvm(\n    importName: string,\n    container: Container,\n    rvmMapData: string[]\n  ): string {\n    const sc = container.$SC[importName];\n    if (!sc) {\n      console.debug(\n        \"  matchRvm - no requiredVersion due to no container scope found for importName\",\n        importName\n      );\n      return \"\";\n    }\n    if (!sc.options.import) {\n      console.debug(\n        \"  matchRvm - import is false for importName\",\n        importName,\n        \"\\n  Using requiredVersion from options directly\",\n        sc.options.requiredVersion\n      );\n      return sc.options.requiredVersion;\n    }\n    const rvm = sc.rvm;\n    if (rvm && rvmMapData) {\n      for (const _src of rvmMapData) {\n        if (rvm[_src]) {\n          const requiredVersion = rvm[_src];\n          console.debug(\n            \"found required version for import name\",\n            importName,\n            requiredVersion\n          );\n          return requiredVersion;\n        }\n      }\n    }\n\n    return \"\";\n  }\n\n  /**\n   *\n   * @param shareMeta\n   * @param semver\n   * @param fallbackVer\n   * @returns\n   */\n  /*@__MANGLE_PROP__*/\n  private semverMatch(\n    name: string,\n    shareMeta: ShareMeta,\n    semver: string,\n    loadedOnly: boolean,\n    fallbackVer?: string\n  ): string {\n    const svRange = parseRange(semver);\n    let matchedVersion = \"\";\n    for (const ver in shareMeta) {\n      if (\n        (!loadedOnly || shareMeta[ver].srcIdx !== undefined) &&\n        satisfy(svRange, ver)\n      ) {\n        console.debug(\n          name,\n          \"found a shared version\",\n          ver,\n          \"that satisfied semver\",\n          semver\n        );\n        matchedVersion = ver;\n        break;\n      }\n    }\n    if (!matchedVersion) {\n      !loadedOnly &&\n        console.warn(\n          name,\n          \"no version satisfied\",\n          semver,\n          \"found, fallback:\",\n          fallbackVer\n        );\n      matchedVersion = fallbackVer;\n    }\n\n    return matchedVersion;\n  }\n\n  /**\n   *\n   * @param shareInfo\n   * @returns\n   */\n  /*@__MANGLE_PROP__*/\n  private pickShareSource(shareInfo: ShareInfo): ShareSource {\n    let ix = shareInfo.srcIdx;\n\n    if (ix === undefined) {\n      if (this.randomSource === true && shareInfo.sources.length > 1) {\n        ix = Math.floor(Math.random() * shareInfo.sources.length);\n      } else {\n        ix = 0;\n      }\n      shareInfo.srcIdx = ix;\n    }\n\n    return shareInfo.sources[ix];\n  }\n\n  /**\n   *\n   * @param id\n   * @returns\n   */\n  /*@__MANGLE_PROP__*/\n  getUrlForId(id: string, reqSemver?: string): string {\n    const rd = this.getRegDefForId(id, reqSemver);\n    return rd && rd.url;\n  }\n\n  /**\n   *\n   * @param id\n   * @returns\n   */\n  /*@__MANGLE_PROP__*/\n  getRegDefForId(id: string, reqSemver?: string): RegDef {\n    // if id starts with ./, then it means rollup has generated a unique bundle for the module\n    if (startsWithDotSlash(id)) {\n      return this.$iU[id.slice(2)]?._;\n    }\n    if (id.startsWith(\"__mf_\")) {\n      if (reqSemver) {\n        const svRange = parseRange(reqSemver);\n        const versions = Object.keys(this.$iU[id]);\n        const version = versions.find((v) => v !== \"_\" && satisfy(svRange, v));\n        return this.$iU[id][version];\n      }\n      return this.$iU[id]._;\n    }\n    // else the id may be the original vanilla module name, no version or unique info that\n    // we can use to lookup its registered url or definition\n    return null;\n    // return this.$iU[startsWithDotSlash(id) ? id.slice(2) : id];\n  }\n\n  /**\n   *\n   * @param url\n   * @returns\n   */\n  /*@__MANGLE_PROP__*/\n  private getIdForUrl(url: string): { id: string; version: string } {\n    return this.$uI[url] && this.$uI[url][0];\n  }\n\n  /**\n   *\n   * @param id\n   * @param url\n   */\n  /*@__MANGLE_PROP__*/\n  private addIdUrlMap(\n    id: string,\n    url: string,\n    def?: unknown,\n    container?: Container\n  ): boolean {\n    if (url !== id) {\n      let id2 = id;\n      if (startsWithDotSlash(id)) {\n        id2 = id.slice(2);\n      }\n\n      let $iUMap = this.$iU[id2];\n      if (!$iUMap) {\n        $iUMap = this.$iU[id2] = createObject();\n      }\n\n      const regDef = { url, def };\n      if (!$iUMap._) {\n        $iUMap._ = regDef;\n      }\n\n      if (container?.version) {\n        $iUMap[container.version] = regDef;\n        container.url = url;\n      }\n\n      addElementToArrayInObject(this.$uI, url, {\n        id,\n        version: container?.version,\n      });\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   *\n   * @param id\n   * @returns\n   */\n  /*@__MANGLE_PROP__*/\n  private getBindForId(id: string): MFBinding {\n    if (startsWithDotSlash(id)) {\n      return this.$B[id.slice(2)];\n    }\n    return this.$B[id];\n  }\n\n  /**\n   *\n   * @param id\n   * @param parentUrl\n   * @param meta\n   * @returns\n   */\n  import(id: string, parentUrl: string, meta?: any) {\n    return this._System.import(id, parentUrl, meta);\n  }\n\n  /**\n   *\n   * @param id\n   * @param containerName\n   */\n  _mfLoaded(id: string, containerName: string, containerVersion?: string) {\n    const container = this._mfGetContainer(containerName, containerVersion);\n    const { n, v } = this.findImportSpecFromId(id, container);\n    const sc = n && v && this.$SS[container.scope];\n    const shareInfo = sc && sc[n][v];\n    if (shareInfo) {\n      const ix = shareInfo.sources.findIndex((s) => s.id === id);\n      shareInfo.sources[ix].loaded = true;\n      if (!shareInfo.url) {\n        shareInfo.srcIdx = ix;\n        shareInfo.id = id;\n        const rd = this.getRegDefForId(id, container?.version);\n        if (!rd) {\n          shareInfo.url = this.sysResolve.call(\n            this._System,\n            id,\n            // we expect module bundle file to reside at the same location as the\n            // container entry file, so we get container url from its id, and use it\n            // as base and add module file id to construct the module's url\n            this.getUrlForId(container.id, container?.version)\n          );\n        } else {\n          shareInfo.url = id;\n        }\n      }\n    }\n  }\n\n  /**\n   * Register a module.\n   *\n   * - `id` - A module needs an *unique* id to register.  The id could be\n   * the full URL or path of the file containing the module.\n   * - `currentScript` - `document.currentScript` is the standard way to\n   * get the URL.\n   * - `federation` - If a file has multiple modules, then only the first\n   * one can use the URL, and subsequent ones need to provide an id.\n   *\n   * @param id\n   * @param dep\n   * @param declare\n   * @param metas\n   * @returns\n   */\n  register(\n    id: any,\n    deps: any,\n    declare: any,\n    meta: any,\n    src?: string,\n    container?: Container\n  ): unknown {\n    if (typeof id !== \"string\") {\n      console.debug(\"federation - no name for register - using original\");\n      return this.sysRegister.apply(this._System, arguments);\n    }\n\n    const currentScr: any = getCurrentScript();\n    const url = currentScr && currentScr.src;\n    console.debug(`federation register - id:`, id, \"url:\", url);\n    const def = [deps, declare, meta];\n    this.addIdUrlMap(id, url, def, container);\n\n    return this.sysRegister.apply(this._System, def);\n  }\n\n  /**\n   *\n   * @param name - container name\n   */\n  /*@__MANGLE_PROP__*/\n  _checkPendingRegs(name: string) {\n    const pC = this.$pC;\n    const pendingRegs = pC[name];\n    if (pendingRegs) {\n      delete pC[name];\n      if (!firstObjectKey(pC)) {\n        // reset pending object\n        this.$pC = createObject();\n      }\n      setTimeout(() => {\n        for (const pR of pendingRegs) {\n          console.debug(\n            `loading deferred module`,\n            pR.id,\n            \"for container\",\n            name\n          );\n          pR.l();\n        }\n      });\n    }\n  }\n  /**\n   *\n   * @param name\n   * @returns\n   */\n  _mfGetContainer(name: string, reqSemver?: string) {\n    const id = containerNameToId(name);\n    const containerMap = this.$C[id];\n    if (!containerMap) {\n      return undefined;\n    }\n    if (reqSemver) {\n      const versions = Object.keys(containerMap);\n      const svRange = parseRange(reqSemver);\n      const version = versions.find((v) => v !== \"_\" && satisfy(svRange, v));\n      console.debug(\n        \"  _mfGetContainer - version\",\n        version,\n        \"for\",\n        name,\n        \"and\",\n        reqSemver\n      );\n      return containerMap[version];\n    }\n    return containerMap._;\n  }\n\n  /**\n   *\n   * @param options\n   * @param mapData\n   * @returns\n   */\n  _mfBind(options: BindOptions, mapData: string[]): MFBinding {\n    const _F = this;\n    let id = options.f;\n    // entry bundle (isEntry)\n    if (options.e) {\n      id = \"__mf_entry_\" + options.c + \"_\" + id;\n      console.debug(\"entry module id\", id, options);\n    }\n    if (_F.$B[id]) {\n      console.warn(\n        `module federation initial binding already exist for id`,\n        id\n      );\n      return _F.$B[id];\n    }\n\n    // const container = _F.getContainer(options.c);\n    // if (!container) {\n    //   console.warn(\"mfBind container not yet registered\", options.c);\n    // } else if (!container.$SS) {\n    //   console.warn(\"mfBind container sharescope is not init\");\n    // } else {\n    //   console.debug(\n    //     \"binding to container, from module\",\n    //     id,\n    //     \"to\",\n    //     container.id\n    //   );\n    // }\n\n    const curScr: any = getCurrentScript();\n    const src = curScr && curScr.src;\n    const binded: MFBinding = {\n      name: options.n,\n      src,\n      fileName: options.f,\n      container: options.c,\n      containerVersion: options.v,\n      scopeName: options.s,\n      mapData,\n      _register(_id, dep, declare, metas, _src) {\n        const r = _F.register(id, dep, declare, metas, _src || src);\n        console.debug(\n          \"  register a unique bundle with id \" +\n            id +\n            \" for resolving binding to a federation in share scope\"\n        );\n        _F._mfLoaded(\"./\" + id, options.c, options.v);\n        return r;\n      },\n      register(dep, declare, metas, _src?: string) {\n        const container = _F._mfGetContainer(options.c, options.v);\n\n        if (!container) {\n          // registering a module for a container that is not yet registered\n          // so we need to defer the registration until the container is registered\n          if (\n            addElementToArrayInObject(_F.$pC, options.c, {\n              id,\n              l: () => this._register(id, dep, declare, metas, src),\n            })\n          ) {\n            console.debug(\n              \"defer register module\",\n              id,\n              \"pending container\",\n              options.c\n            );\n          }\n          return;\n        }\n\n        return this._register(id, dep, declare, metas, _src);\n      },\n    };\n\n    if (id !== options.f) {\n      binded.id = id;\n    }\n\n    _F.$B[id] = binded;\n    return binded;\n  }\n\n  /**\n   *\n   * @param name\n   * @param scopeName\n   * @returns\n   */\n  _mfContainer(name: string, scopeName: string, version: string = \"0.0.0\") {\n    const id = containerNameToId(name);\n    let containerMap = this.$C[id];\n\n    if (!containerMap) {\n      containerMap = this.$C[id] = createObject();\n    }\n\n    let container = containerMap[version];\n    if (container) {\n      // If container with this version already exists, log warning and return existing\n      console.warn(`Container ${name} with version ${version} already exists`);\n      return container;\n    }\n\n    container = containerMap[version] = new Container(\n      id,\n      name,\n      scopeName,\n      version,\n      this\n    );\n\n    // If this is the first container for this ID, store it as default and with version\n    if (!containerMap._) {\n      containerMap._ = container;\n    }\n\n    return container;\n  }\n\n  /**\n   * _**Module Federation Import**_\n   * @param name\n   * @param scope\n   * @param semver\n   * @param fallbackToFirst\n   */\n  _mfImport(\n    name: string,\n    scope: string,\n    semver?: string,\n    fallbackToFirst?: boolean\n  ) {\n    const sc = this.$SS[scope];\n    const shareMeta = sc && sc[name];\n    console.debug(\"  _mfImport\", name, scope, semver, fallbackToFirst);\n    if (shareMeta) {\n      let matchedVersion =\n        semver && this.semverMatch(name, shareMeta, semver, false);\n      if (!matchedVersion && (!semver || fallbackToFirst)) {\n        matchedVersion = firstObjectKey(shareMeta);\n      }\n      const shareInfo = shareMeta[matchedVersion];\n\n      if (shareInfo) {\n        if (shareInfo.url) {\n          return this._System.import(shareInfo.url);\n        } else {\n          const source = this.pickShareSource(shareInfo);\n          const parentUrl = this.getUrlForId(\n            containerNameToId(source.container)\n          );\n          return this._System.import(source.id, parentUrl);\n        }\n      }\n    }\n\n    return Promise.reject(\"_mfImport \" + name + \" failed\");\n  }\n\n  /**\n   * Import an expose module from a module federation container\n   *\n   * @param id - the specifier to import - it must start with `\"-MF_EXPOSE \"`\n   */\n  async _importExpose(id: string, semver?: string) {\n    const [type, exposeModule, requiredVersion] = id.split(\" \");\n    if (requiredVersion && !semver) {\n      semver = requiredVersion;\n    }\n    if (type === \"-MF_EXPOSE\") {\n      let [pkgScope, fynappName, module] = exposeModule.split(\"/\");\n      if (!module) {\n        module = fynappName;\n        fynappName = pkgScope;\n        pkgScope = \"\";\n      }\n      const container = this._mfGetContainer(fynappName, semver);\n      console.debug(\n        \"  _importExpose - container\",\n        container.name,\n        container.version\n      );\n      const factory = await container._mfGet(\"./\" + module);\n      const mod = factory();\n      return mod;\n    }\n\n    return null;\n  }\n\n  /**\n   * ***Add Shared***\n   *\n   * @param scope\n   * @param key\n   * @param version\n   * @param id\n   * @param container\n   */\n  _S(\n    scope: string,\n    key: string,\n    version: string,\n    id: string,\n    container: string,\n    containerVersion?: string\n  ): void {\n    const _ss = this.$SS[scope];\n    const _sm = _ss[key] || (_ss[key] = createObject());\n    const _si = _sm[version] || (_sm[version] = createObject());\n    if (\n      addElementToArrayInObject(_si, \"sources\", {\n        id,\n        container,\n        version: containerVersion,\n      })\n    ) {\n      _si.sources.length > 1 &&\n        console.debug(\n          `adding share source from container`,\n          container,\n          scope + \":\" + key + \":\" + version\n        );\n    }\n  }\n\n  /**\n   * ***Init Scope***\n   * @param scope\n   * @param shareScope\n   */\n  _mfInitScope(scope: string, shareScope?: ShareScope): ShareScope {\n    const _ss =\n      this.$SS[scope] || (this.$SS[scope] = shareScope || createObject());\n    if (shareScope && _ss !== shareScope) {\n      throw new Error(`share scope ` + scope + ` already initialized.`);\n    }\n    return _ss;\n  }\n}\n\n/**\n *\n */\nclass Container {\n  /**\n   * Original name of the container from developer\n   */\n  name: string;\n  /**\n   * ID FederationJS given to the container, derived from name\n   */\n  id: string;\n  /**\n   * URL of the container entry\n   */\n  url?: string;\n  /** default scope name for this container */\n  scope: string;\n  /** share config */\n  $SC: ShareConfig;\n  /** version of this container */\n  version: string;\n\n  /** the share scope object from the federation this container is sharing modules to/from */\n  $SS: ShareScope;\n  /** exposed modules */\n  $E: Record<string, string>;\n  /**\n   * The FederationJS runtime\n   */\n  private Fed: FederationJS;\n  /**\n   *\n   * @param name\n   * @param scopeName\n   * @param version - version of the container\n   */\n  constructor(\n    id: string,\n    name: string,\n    scopeName: string,\n    version: string = \"0.0.0\",\n    federation?: any\n  ) {\n    this.scope = scopeName;\n    this.id = id;\n    this.name = name;\n    this.version = version;\n    /*@__MANGLE_PROP__*/\n    this.Fed = federation || _global.Federation;\n\n    this.$SC = createObject();\n    this.$E = createObject();\n  }\n\n  /**\n   * Gets the version of this container\n   * @returns The container version\n   */\n  getVersion(): string {\n    return this.version;\n  }\n\n  /**\n   *\n   * @param dep\n   * @param declare\n   * @param metas\n   * @returns\n   */\n  register(dep: string[], declare: any, metas: any): unknown {\n    this.Fed._checkPendingRegs(this.name);\n    return this.Fed.register(this.id, dep, declare, metas, undefined, this);\n  }\n\n  /**\n   * add share\n   */\n  _S(key: string, options: AddShareOptions, shared: ShareSpec[]): void {\n    const scope = options.shareScope || this.scope;\n    let _sm = this.$SC[key];\n    if (!_sm) {\n      _sm = this.$SC[key] = {\n        options,\n        rvm: createObject(),\n        versions: createObject(),\n      };\n    }\n    for (const _s of shared) {\n      // first entry is chunk bundle and version\n      const [_bundle, version] = _s[0];\n      if (version) {\n        _sm.versions[version] = { id: _bundle.id };\n        // import === false means consume only shared, do not add it\n        // to the global share scope since this container cannot provide it\n        if (options.import !== false) {\n          this.Fed._S(scope, key, version, _bundle.id, this.name, this.version);\n        }\n      }\n      const maps = _s.slice(1);\n      const _rvm = this.$SC[key].rvm;\n      for (const _m of maps) {\n        _rvm[_m[0]] = _m[1];\n      }\n    }\n    // this.Fed._S(key, meta, version, uniqId, this.scope);\n  }\n\n  /**\n   * add expose\n   */\n  _E(key: string, chunkId: any): void {\n    this.$E[key] = chunkId.id;\n  }\n\n  /**\n   *\n   * @param name\n   * @returns\n   */\n  _mfGet(name: string): Promise<() => unknown> {\n    const id = this.$E[name] || name;\n    const parentUrl = this.Fed.getUrlForId(this.id, this.version);\n    return this.Fed.import(id, parentUrl).then((_m: unknown) => {\n      return () => _m;\n    });\n  }\n\n  /**\n   *\n   */\n  _mfInit(shareScope?: ShareScope): ShareScope | undefined {\n    if (this.$SS) {\n      console.warn(`container`, this.id, `already initialized`);\n      return undefined;\n    }\n    return (this.$SS = this.Fed._mfInitScope(this.scope, shareScope));\n  }\n}\n\n_global.Federation = new FederationJS();\n"],"names":[],"mappings":"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"}
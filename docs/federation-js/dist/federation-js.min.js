!function(){"use strict";const t=t=>{const r=t=>t.split(".").map(t=>"NaN"!==t&&""+ +t===t?+t:t),n=t=>{const n=/^([^-+]+)?(?:-([^+]+))?(?:\+(.+))?$/.exec(t),e=n[1]?[0,...r(n[1])]:[0];n[2]&&(e.length++,e.push.apply(e,r(n[2])));let i=e[e.length-1];for(;e.length&&(void 0===i||/^[*xX]$/.test(i));)e.pop(),i=e[e.length-1];return e},e=t=>1===t.length?[0]:2===t.length?[1,...t.slice(1)]:3===t.length?[2,...t.slice(1)]:[t.length,...t.slice(1)],i=t=>[-t[0]-1,...t.slice(1)],s=t=>{const r=/^(\^|~|<=|<|>=|>|=|v|!)/.exec(t),s=r?r[0]:"",o=n(s.length?t.slice(s.length).trim():t.trim());switch(s){case"^":return o.length>1&&0===o[1]?o.length>2&&0===o[2]?[3,...o.slice(1)]:[2,...o.slice(1)]:[1,...o.slice(1)];case"~":return[2,...o.slice(1)];case">=":return o;case"=":case"v":case"":return e(o);case"<":return i(o);case">":return[,e(o),0,o,2];case"<=":return[,e(o),i(o),1];case"!":return[,e(o),0];default:throw new Error("Unexpected start value")}},o=(t,r)=>{if(1===t.length)return t[0];const n=[];for(const r of t.slice().reverse())0 in r?n.push(r):n.push(...r.slice(1));return[,...n,...t.slice(1).map(()=>r)]},c=t=>{const r=t.split(/\s+-\s+/);if(1===r.length){const r=t.trim().split(/(?<=[-0-9A-Za-z])\s+/g).map(s);return o(r,2)}const c=n(r[0]),f=n(r[1]);return[,e(f),i(f),1,c,2]};return(t=>{const r=t.split(/\s*\|\|\s*/).map(c);return o(r,1)})(t)},r=(t,n)=>{if(0 in t){a=function(t){return t.split(".").map(function(t){return+t==t?+t:t})},l=(d=/^([^-+]+)?(?:-([^+]+))?(?:\+(.+))?$/.exec(n))[1]?a(d[1]):[],d[2]&&(l.length++,l.push.apply(l,a(d[2]))),d[3]&&(l.push([]),l.push.apply(l,a(d[3]))),n=l;var e=t[0],i=e<0;i&&(e=-e-1);for(var s=0,o=1,c=!0;;o++,s++){var f,h,u=o<t.length?(typeof t[o])[0]:"";if(s>=n.length||"o"==(h=(typeof(f=n[s]))[0]))return!c||("u"==u?o>e&&!i:""==u!=i);if("u"==h){if(!c||"u"!=u)return!1}else if(c)if(u==h)if(o<=e){if(f!=t[o])return!1}else{if(i?f>t[o]:f<t[o])return!1;f!=t[o]&&(c=!1)}else if("s"!=u&&"n"!=u){if(i||o<=e)return!1;c=!1,o--}else{if(o<=e||h<u!=i)return!1;c=!1}else"s"!=u&&"n"!=u&&(c=!1,o--)}}var a,d,l,m=[],v=m.pop.bind(m);for(s=1;s<t.length;s++){var p=t[s];m.push(1==p?v()|v():2==p?v()&v():p?r(p,n):!v())}return!!v()},n="undefined"!=typeof document;function e(){return n&&(document.currentScript||function(){if(n&&"loading"===document.readyState){const t=document.querySelectorAll("script[src]");return t[t.length-1]}}())}function i(t){return t&&t.startsWith("./")}function s(t,r,n){return!(t[r]||(t[r]=[])).includes(n)&&t[r].push(n)}function o(t){return Object.keys(t)[0]}function c(t){const r="__mf_container_";return t.startsWith(r)?t:r+t}function f(){return Object.create(null)}const h=globalThis;class Container{constructor(t,r,n,e="0.0.0",i){this.scope=n,this.id=t,this.name=r,this.version=e,this.t=i||h.Federation,this.$SC=f(),this.$E=f()}getVersion(){return this.version}register(t,r,n){return this.t.i(this.name),this.t.register(this.id,t,r,n,void 0,this)}_S(t,r,n){const e=r.shareScope||this.scope;let i=this.$SC[t];i||(i=this.$SC[t]={options:r,rvm:f(),versions:f()});for(const s of n){const[n,o]=s[0];o&&(i.versions[o]={id:n.id},!1!==r.import&&this.t._S(e,t,o,n.id,this.name,this.version));const c=s.slice(1),f=this.$SC[t].rvm;for(const t of c)f[t[0]]=t[1]}}_E(t,r){this.$E[t]=r.id}_mfGet(t){const r=this.$E[t]||t,n=this.t.o(this.id,this.version);return this.t.import(r,n).then(t=>()=>t)}_mfInit(t){if(!this.$SS)return this.$SS=this.t._mfInitScope(this.scope,t);console.warn("container",this.id,"already initialized")}}h.Federation=new class{constructor(t){const r=(this._System=t||h.System).constructor.prototype;this.h=r.resolve,this.u=r.register,this.m=r.instantiate,this.$iU=f(),this.$uI=f(),this.$pC=f(),this.$C=f();const n=this;r.resolve=function(t,r,e){const i=n.p(t);if(i){if(i.def)return t;if(i.url,i.url)return i.url}return n.resolve(t,r,e)},r.instantiate=function(t,r,e){const i=n.p(t),s=i&&i.def;if(s){if(1!==s)return i.def=1,s;console.error("reg def already used for",t)}return n.m.apply(n._System,arguments)},this.$B=f(),this.$SS=f(),this.sharedModuleCache=new Map}$(t){for(const r in this.$C){const n=this.$C[r];for(const r in n)if("_"!==r){const e=n[r];for(const r in e.$E)if(e.$E[r]===t)return e}}}S(t){return!(t.includes("://")||t.startsWith("./")||t.startsWith("../")||t.startsWith("/"))}I(t){const r={found:!1,providers:[],consumers:[]};for(const n in this.$SS){const e=this.$SS[n];if(e[t]){r.found=!0;for(const i in e[t]){const s=e[t][i];if(s.sources)for(const t of s.sources)r.providers.push({scope:n,version:i,container:t.container,url:s.url})}}}for(const n in this.$C){const e=this.$C[n];for(const n in e)if("_"!==n){const i=e[n];if(i.$SC[t]){const n=i.$SC[t];!1===n.options.import&&r.consumers.push({container:i.name,version:i.version,semver:n.options.semver}),r.found=!0}}}return r}M(t){const r=this.sharedModuleCache.get(t),n=Date.now();if(r&&n-r.timestamp<1e3)return r.result;const e=this.I(t);return this.sharedModuleCache.set(t,{timestamp:n,result:e}),e}C(t,r,n){const e=n.providers.map(t=>`${t.container}@${t.version}`).join(", "),i=new Error(`Cannot resolve shared module '${t}' - version mismatch\n  Required version: ${r||"any"}\n  Available providers: ${e}\n  Consumers: ${n.consumers.map(t=>t.container).join(", ")}\n  Solution: Ensure a provider with compatible version is loaded`);return i.name="SharedModuleVersionMismatchError",i}N(t,r){const n=r.consumers.map(t=>`${t.container} (requires ${t.semver||"any"})`).join(", "),e=new Error(`Cannot resolve shared module '${t}' - no provider loaded\n  Module is configured as shared in: ${n}\n  Solution: Load a provider container that exports '${t}'\n  Note: Check the 'shared-providers' in your manifest for hints`);return e.name="SharedModuleNoProviderError",e}resolve(n,e,s){const o=this,{id:f,version:h}=o.k(e)||{};let u,a=f&&o._mfGetContainer(f,h);if(!a&&i(e)&&(a=this.$(e),a&&(e=o.h.call(o._System,e,a.url,s))),this.S(n)){const i=this.M(n);if(!i.found)return o.h.call(this._System,n,e,s);if(!a){const t=o.F(f||e);a=t&&o._mfGetContainer(t.container,t.containerVersion)}if(a){const e=a.$SC[n]?.options?.semver;a.name,i.providers;let s=!1;for(const n of i.providers)if(!e||r(t(e),n.version)){if(n.container,n.version,s=!0,n.url)return n.url;break}if(!s){if(0===i.providers.length)throw this.N(n,i);if(e)throw this.C(n,e,i)}}else{if(!(i.providers.length>0))throw this.N(n,i);{console.warn(`No container context for '${n}', using first available provider`);const t=i.providers[0];if(t.url)return t.url}}}if(!a){const t=o.F(f||e);if(a=t&&o._mfGetContainer(t.container,t.containerVersion),!a)return console[f?"warn":"debug"](" >> Unable to find container for id "+n+" parentId "+f+" parentURL "+e),o.h.call(this,n,e,s);u=t.mapData}const{n:d,v:l}=o.U(n,a);if(!d)return o.h.call(o._System,n,e,s);const m=o.O(d,a,u),v=o.$SS[a.scope],p=v&&v[d];let _=m?o.P(d,p,m,!0,l):l;!_&&p&&(_=o.P(d,p,m,!1,l));const g=p&&p[_];let $=n,w=e;if(g){if(g.url)return g.url,o.R(n,g.url),g.url;const t=o.j(g);t.loaded=!0,w=o.o(c(t.container),t.version),$=t.id}const S=o.h.call(this,$,w,s);return o.R($,S),n!==$&&o.R(n,S),g&&(g.url=S),S}U(t,r){const n=r.$SC;let e="",i="";if(n[t])e=t,i=o(n[t].versions);else for(const r in n){const s=n[r];for(const n in s.versions)if(t===s.versions[n].id){e=r,i=n;break}}return{n:e,v:i}}O(t,r,n){const e=r.$SC[t];if(!e)return"";if(!e.options.import)return e.options.semver,e.options.semver;const i=e.rvm;if(i&&n)for(const t of n)if(i[t])return i[t];return""}P(n,e,i,s,o){const c=t(i);let f="";for(const t in e)if((!s||void 0!==e[t].srcIdx)&&r(c,t)){f=t;break}return f||(!s&&console.warn(n,"no version satisfied",i,"found, fallback:",o),f=o),f}j(t){let r=t.srcIdx;return void 0===r&&(r=!0===this.randomSource&&t.sources.length>1?Math.floor(Math.random()*t.sources.length):0,t.srcIdx=r),t.sources[r]}o(t,r){const n=this.p(t,r);return n&&n.url}p(n,e){if(i(n))return this.$iU[n.slice(2)]?._;if(n.startsWith("__mf_")){if(e){const i=t(e),s=Object.keys(this.$iU[n]).find(t=>"_"!==t&&r(i,t));return this.$iU[n][s]}return this.$iU[n]._}return null}k(t){return this.$uI[t]&&this.$uI[t][0]}R(t,r,n,e){if(r!==t){let o=t;i(t)&&(o=t.slice(2));let c=this.$iU[o];c||(c=this.$iU[o]=f());const h={url:r,def:n};return c._||(c._=h),e?.version&&(c[e.version]=h,e.url=r),s(this.$uI,r,{id:t,version:e?.version}),!0}return!1}F(t){return i(t)?this.$B[t.slice(2)]:this.$B[t]}import(t,r,n){return this._System.import(t,r,n)}_mfLoaded(t,r,n){const e=this._mfGetContainer(r,n),{n:i,v:s}=this.U(t,e),o=i&&s&&this.$SS[e.scope],c=o&&o[i][s];if(c){const r=c.sources.findIndex(r=>r.id===t);if(c.sources[r].loaded=!0,!c.url){c.srcIdx=r,c.id=t;const n=this.p(t,e?.version);c.url=n?t:this.h.call(this._System,t,this.o(e.id,e?.version))}}}register(t,r,n,i,s,o){if("string"!=typeof t)return this.u.apply(this._System,arguments);const c=e(),f=c&&c.src,h=[r,n,i];return this.R(t,f,h,o),this.u.apply(this._System,h)}i(t){const r=this.$pC,n=r[t];n&&(delete r[t],o(r)||(this.$pC=f()),setTimeout(()=>{for(const t of n)t.id,t.l()}))}_mfGetContainer(n,e){const i=c(n),s=this.$C[i];if(s){if(e){const n=Object.keys(s),i=t(e);return s[n.find(t=>"_"!==t&&r(i,t))]}return s._}}_mfBind(t,r){const n=this;let i=t.f;if(t.e&&(i="__mf_entry_"+t.c+"_"+i),n.$B[i])return console.warn("module federation initial binding already exist for id",i),n.$B[i];const o=e(),c=o&&o.src,f={name:t.n,src:c,fileName:t.f,container:t.c,containerVersion:t.v,scopeName:t.s,mapData:r,_register(r,e,s,o,f){const h=n.register(i,e,s,o,f||c);return n._mfLoaded("./"+i,t.c,t.v),h},register(r,e,o,f){if(n._mfGetContainer(t.c,t.v))return this._register(i,r,e,o,f);s(n.$pC,t.c,{id:i,l:()=>this._register(i,r,e,o,c)})&&t.c}};return i!==t.f&&(f.id=i),n.$B[i]=f,f}_mfContainer(t,r,n="0.0.0"){const e=c(t);let i=this.$C[e];i||(i=this.$C[e]=f());let s=i[n];return s?(console.warn(`Container ${t} with version ${n} already exists`),s):(this.sharedModuleCache.clear(),s=i[n]=new Container(e,t,r,n,this),i._||(i._=s),s)}_mfImport(t,r,n,e){const i=this.$SS[r],s=i&&i[t];if(s){let r=n&&this.P(t,s,n,!1);r||n&&!e||(r=o(s));const i=s[r];if(i){if(i.url)return this._System.import(i.url);{const t=this.j(i),r=this.o(c(t.container));return this._System.import(t.id,r)}}}return Promise.reject("_mfImport "+t+" failed")}async _importExpose(t,r){const[n,e,i]=t.split(" ");if(i&&!r&&(r=i),"-MF_EXPOSE"===n){let[t,n,i]=e.split("/");i||(i=n,n=t,t="");const s=this._mfGetContainer(n,r);return s.name,s.version,(await s._mfGet("./"+i))()}return null}_S(t,r,n,e,i,o){const c=this.$SS[t],h=c[r]||(c[r]=f()),u=h[n]||(h[n]=f());s(u,"sources",{id:e,container:i,version:o})&&u.sources.length}_mfInitScope(t,r){const n=this.$SS[t]||(this.$SS[t]=r||f());if(r&&n!==r)throw new Error("share scope "+t+" already initialized.");return n}}}();
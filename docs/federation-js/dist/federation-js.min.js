!function(){"use strict";const t=t=>{const r=t=>t.split(".").map(t=>"NaN"!==t&&""+ +t===t?+t:t),n=t=>{const n=/^([^-+]+)?(?:-([^+]+))?(?:\+(.+))?$/.exec(t),i=n[1]?[0,...r(n[1])]:[0];n[2]&&(i.length++,i.push.apply(i,r(n[2])));let s=i[i.length-1];for(;i.length&&(void 0===s||/^[*xX]$/.test(s));)i.pop(),s=i[i.length-1];return i},i=t=>1===t.length?[0]:2===t.length?[1,...t.slice(1)]:3===t.length?[2,...t.slice(1)]:[t.length,...t.slice(1)],s=t=>[-t[0]-1,...t.slice(1)],e=t=>{const r=/^(\^|~|<=|<|>=|>|=|v|!)/.exec(t),e=r?r[0]:"",o=n(e.length?t.slice(e.length).trim():t.trim());switch(e){case"^":return o.length>1&&0===o[1]?o.length>2&&0===o[2]?[3,...o.slice(1)]:[2,...o.slice(1)]:[1,...o.slice(1)];case"~":return[2,...o.slice(1)];case">=":return o;case"=":case"v":case"":return i(o);case"<":return s(o);case">":return[,i(o),0,o,2];case"<=":return[,i(o),s(o),1];case"!":return[,i(o),0];default:throw new Error("Unexpected start value")}},o=(t,r)=>{if(1===t.length)return t[0];const n=[];for(const r of t.slice().reverse())0 in r?n.push(r):n.push(...r.slice(1));return[,...n,...t.slice(1).map(()=>r)]},c=t=>{const r=t.split(/\s+-\s+/);if(1===r.length){const r=t.trim().split(/(?<=[-0-9A-Za-z])\s+/g).map(e);return o(r,2)}const c=n(r[0]),f=n(r[1]);return[,i(f),s(f),1,c,2]};return(t=>{const r=t.split(/\s*\|\|\s*/).map(c);return o(r,1)})(t)},r=(t,n)=>{if(0 in t){a=function(t){return t.split(".").map(function(t){return+t==t?+t:t})},d=(l=/^([^-+]+)?(?:-([^+]+))?(?:\+(.+))?$/.exec(n))[1]?a(l[1]):[],l[2]&&(d.length++,d.push.apply(d,a(l[2]))),l[3]&&(d.push([]),d.push.apply(d,a(l[3]))),n=d;var i=t[0],s=i<0;s&&(i=-i-1);for(var e=0,o=1,c=!0;;o++,e++){var f,u,h=o<t.length?(typeof t[o])[0]:"";if(e>=n.length||"o"==(u=(typeof(f=n[e]))[0]))return!c||("u"==h?o>i&&!s:""==h!=s);if("u"==u){if(!c||"u"!=h)return!1}else if(c)if(h==u)if(o<=i){if(f!=t[o])return!1}else{if(s?f>t[o]:f<t[o])return!1;f!=t[o]&&(c=!1)}else if("s"!=h&&"n"!=h){if(s||o<=i)return!1;c=!1,o--}else{if(o<=i||u<h!=s)return!1;c=!1}else"s"!=h&&"n"!=h&&(c=!1,o--)}}var a,l,d,m=[],_=m.pop.bind(m);for(e=1;e<t.length;e++){var v=t[e];m.push(1==v?_()|_():2==v?_()&_():v?r(v,n):!_())}return!!_()},n="undefined"!=typeof document;function i(){return n&&(document.currentScript||function(){if(n&&"loading"===document.readyState){const t=document.querySelectorAll("script[src]");return t[t.length-1]}}())}function s(t){return t&&t.startsWith("./")}function e(t,r,n){return!(t[r]||(t[r]=[])).includes(n)&&t[r].push(n)}function o(t){return Object.keys(t)[0]}function c(t){const r="__mf_container_";return t.startsWith(r)?t:r+t}function f(){return Object.create(null)}const u=globalThis;class Container{constructor(t,r,n,i="0.0.0",s){this.scope=n,this.id=t,this.name=r,this.version=i,this.t=s||u.Federation,this.$SC=f(),this.$E=f()}getVersion(){return this.version}register(t,r,n){return this.t.i(this.name),this.t.register(this.id,t,r,n,void 0,this)}_S(t,r,n){const i=r.shareScope||this.scope;let s=this.$SC[t];s||(s=this.$SC[t]={options:r,rvm:f(),versions:f()});for(const e of n){const[n,o]=e[0];o&&(s.versions[o]={id:n.id},!1!==r.import&&this.t._S(i,t,o,n.id,this.name,this.version));const c=e.slice(1),f=this.$SC[t].rvm;for(const t of c)f[t[0]]=t[1]}}_E(t,r){this.$E[t]=r.id}_mfGet(t){const r=this.$E[t]||t,n=this.t.o(this.id,this.version);return this.t.import(r,n).then(t=>()=>t)}_mfInit(t){if(!this.$SS)return this.$SS=this.t._mfInitScope(this.scope,t);console.warn("container",this.id,"already initialized")}}u.Federation=new class{constructor(t){const r=(this._System=t||u.System).constructor.prototype;this.u=r.resolve,this.h=r.register,this.m=r.instantiate,this.$iU=f(),this.$uI=f(),this.$pC=f(),this.$C=f();const n=this;r.resolve=function(t,r,i){const s=n.p(t);if(s){if(s.def)return t;if(s.url,s.url)return s.url}return n.resolve(t,r,i)},r.instantiate=function(t,r,i){const s=n.p(t),e=s&&s.def;if(e){if(1!==e)return s.def=1,e;console.error("reg def already used for",t)}return n.m.apply(n._System,arguments)},this.$B=f(),this.$SS=f()}I(t){for(const r in this.$C){const n=this.$C[r];for(const r in n)if("_"!==r){const i=n[r];for(const r in i.$E)if(i.$E[r]===t)return i}}}resolve(t,r,n){const i=this,{id:e,version:o}=i.F(r)||{};let f,u=e&&i._mfGetContainer(e,o);if(!u&&s(r)&&(u=this.I(r),u&&(r=i.u.call(i._System,r,u.url,n))),!u){const s=i.S(e||r);if(u=s&&i._mfGetContainer(s.container,s.containerVersion),!u)return console[e?"warn":"debug"](" >> Unable to find container for id "+t+" parentId "+e+" parentURL "+r),i.u.call(this,t,r,n);f=s.mapData}const{n:h,v:a}=i.U(t,u);if(!h)return i.u.call(i._System,t,r,n);const l=i.k(h,u,f),d=i.$SS[u.scope],m=d&&d[h];let _=l?i.M(h,m,l,!0,a):a;!_&&m&&(_=i.M(h,m,l,!1,a));const v=m&&m[_];let p=t,g=r;if(v){if(v.url)return v.url,i.O(t,v.url),v.url;const r=i.$(v);r.loaded=!0,g=i.o(c(r.container),r.version),p=r.id}const I=i.u.call(this,p,g,n);return i.O(p,I),t!==p&&i.O(t,I),v&&(v.url=I),I}U(t,r){const n=r.$SC;let i="",s="";if(n[t])i=t,s=o(n[t].versions);else for(const r in n){const e=n[r];for(const n in e.versions)if(t===e.versions[n].id){i=r,s=n;break}}return{n:i,v:s}}k(t,r,n){const i=r.$SC[t];if(!i)return"";if(!i.options.import)return i.options.requiredVersion,i.options.requiredVersion;const s=i.rvm;if(s&&n)for(const t of n)if(s[t])return s[t];return""}M(n,i,s,e,o){const c=t(s);let f="";for(const t in i)if((!e||void 0!==i[t].srcIdx)&&r(c,t)){f=t;break}return f||(!e&&console.warn(n,"no version satisfied",s,"found, fallback:",o),f=o),f}$(t){let r=t.srcIdx;return void 0===r&&(r=!0===this.randomSource&&t.sources.length>1?Math.floor(Math.random()*t.sources.length):0,t.srcIdx=r),t.sources[r]}o(t,r){const n=this.p(t,r);return n&&n.url}p(n,i){if(s(n))return this.$iU[n.slice(2)]?._;if(n.startsWith("__mf_")){if(i){const s=t(i),e=Object.keys(this.$iU[n]).find(t=>"_"!==t&&r(s,t));return this.$iU[n][e]}return this.$iU[n]._}return null}F(t){return this.$uI[t]&&this.$uI[t][0]}O(t,r,n,i){if(r!==t){let o=t;s(t)&&(o=t.slice(2));let c=this.$iU[o];c||(c=this.$iU[o]=f());const u={url:r,def:n};return c._||(c._=u),i?.version&&(c[i.version]=u,i.url=r),e(this.$uI,r,{id:t,version:i?.version}),!0}return!1}S(t){return s(t)?this.$B[t.slice(2)]:this.$B[t]}import(t,r,n){return this._System.import(t,r,n)}_mfLoaded(t,r,n){const i=this._mfGetContainer(r,n),{n:s,v:e}=this.U(t,i),o=s&&e&&this.$SS[i.scope],c=o&&o[s][e];if(c){const r=c.sources.findIndex(r=>r.id===t);if(c.sources[r].loaded=!0,!c.url){c.srcIdx=r,c.id=t;const n=this.p(t,i?.version);c.url=n?t:this.u.call(this._System,t,this.o(i.id,i?.version))}}}register(t,r,n,s,e,o){if("string"!=typeof t)return this.h.apply(this._System,arguments);const c=i(),f=c&&c.src,u=[r,n,s];return this.O(t,f,u,o),this.h.apply(this._System,u)}i(t){const r=this.$pC,n=r[t];n&&(delete r[t],o(r)||(this.$pC=f()),setTimeout(()=>{for(const t of n)t.id,t.l()}))}_mfGetContainer(n,i){const s=c(n),e=this.$C[s];if(e){if(i){const n=Object.keys(e),s=t(i);return e[n.find(t=>"_"!==t&&r(s,t))]}return e._}}_mfBind(t,r){const n=this;let s=t.f;if(t.e&&(s="__mf_entry_"+t.c+"_"+s),n.$B[s])return console.warn("module federation initial binding already exist for id",s),n.$B[s];const o=i(),c=o&&o.src,f={name:t.n,src:c,fileName:t.f,container:t.c,containerVersion:t.v,scopeName:t.s,mapData:r,_register(r,i,e,o,f){const u=n.register(s,i,e,o,f||c);return n._mfLoaded("./"+s,t.c,t.v),u},register(r,i,o,f){if(n._mfGetContainer(t.c,t.v))return this._register(s,r,i,o,f);e(n.$pC,t.c,{id:s,l:()=>this._register(s,r,i,o,c)})&&t.c}};return s!==t.f&&(f.id=s),n.$B[s]=f,f}_mfContainer(t,r,n="0.0.0"){const i=c(t);let s=this.$C[i];s||(s=this.$C[i]=f());let e=s[n];return e?(console.warn(`Container ${t} with version ${n} already exists`),e):(e=s[n]=new Container(i,t,r,n,this),s._||(s._=e),e)}_mfImport(t,r,n,i){const s=this.$SS[r],e=s&&s[t];if(e){let r=n&&this.M(t,e,n,!1);r||n&&!i||(r=o(e));const s=e[r];if(s){if(s.url)return this._System.import(s.url);{const t=this.$(s),r=this.o(c(t.container));return this._System.import(t.id,r)}}}return Promise.reject("_mfImport "+t+" failed")}async _importExpose(t,r){const[n,i,s]=t.split(" ");if(s&&!r&&(r=s),"-MF_EXPOSE"===n){let[t,n,s]=i.split("/");s||(s=n,n=t,t="");const e=this._mfGetContainer(n,r);return e.name,e.version,(await e._mfGet("./"+s))()}return null}_S(t,r,n,i,s,o){const c=this.$SS[t],u=c[r]||(c[r]=f()),h=u[n]||(u[n]=f());e(h,"sources",{id:i,container:s,version:o})&&h.sources.length}_mfInitScope(t,r){const n=this.$SS[t]||(this.$SS[t]=r||f());if(r&&n!==r)throw new Error("share scope "+t+" already initialized.");return n}}}();
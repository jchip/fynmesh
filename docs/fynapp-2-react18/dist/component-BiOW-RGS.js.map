{"version":3,"file":"component-BiOW-RGS.js","sources":["../../src/component.ts"],"sourcesContent":["import React from \"esm-react\";\nimport ReactDOMClient from \"esm-react-dom\";\nimport App from \"./App\";\nimport { preloadComponents, ComponentLibrary } from \"./components\";\n\n// Create ReactDOM-like object for federation\nconst ReactDOM = {\n    createRoot: ReactDOMClient.createRoot || ReactDOMClient.default?.createRoot\n};\n\n// Component export for shell rendering\nexport const component = {\n    type: 'react' as const,\n    component: FynApp2React18Component,\n    react: React,        // FynApp provides its React 18 version\n    reactDOM: ReactDOM,  // FynApp provides its ReactDOM 18 version\n    metadata: {\n        name: 'FynApp 2 (React 18)',\n        version: '1.0.0',\n        description: 'React 18 demo app with fynapp-x1 v1 components'\n    }\n};\n\n// React component that will be rendered by the shell\nfunction FynApp2React18Component({ fynApp, runtime }: any): React.ReactElement {\n    const [componentLibrary, setComponentLibrary] = React.useState<ComponentLibrary | null>(null);\n    const [loading, setLoading] = React.useState(true);\n    const [error, setError] = React.useState<string | null>(null);\n\n    React.useEffect(() => {\n        async function loadComponents() {\n            try {\n                console.debug(\"Loading component library from fynapp-x1 v1...\");\n                const library = await preloadComponents();\n                setComponentLibrary(library);\n                console.debug(\"Successfully loaded component library from fynapp-x1 v1\");\n            } catch (err) {\n                console.error(\"Failed to load components from fynapp-x1:\", err);\n                setError((err as Error).message);\n            } finally {\n                setLoading(false);\n            }\n        }\n\n        loadComponents();\n    }, []);\n\n    if (loading) {\n        return React.createElement('div', {\n            style: { padding: '20px', textAlign: 'center' }\n        }, [\n            React.createElement('h2', { key: 'title' }, 'Loading components from fynapp-x1 v1...'),\n            React.createElement('div', {\n                key: 'spinner',\n                style: {\n                    marginTop: '20px',\n                    display: 'inline-block',\n                    width: '50px',\n                    height: '50px',\n                    border: '5px solid #f3f3f3',\n                    borderTop: '5px solid #007bff',\n                    borderRadius: '50%',\n                    animation: 'spin 1s linear infinite'\n                }\n            })\n        ]);\n    }\n\n    if (error) {\n        return React.createElement('div', {\n            style: {\n                padding: '20px',\n                color: '#721c24',\n                backgroundColor: '#f8d7da',\n                border: '1px solid #f5c6cb',\n                borderRadius: '4px'\n            }\n        }, [\n            React.createElement('h3', { key: 'title' }, 'Error Loading Components'),\n            React.createElement('p', { key: 'message' }, `Failed to load component library from fynapp-x1: ${error}`),\n            React.createElement('button', {\n                key: 'retry',\n                onClick: () => window.location.reload()\n            }, 'Retry')\n        ]);\n    }\n\n    // Get middleware config\n    const basicCounterData = runtime?.middlewareContext?.get(\"basic-counter\");\n    const middlewareConfig = basicCounterData?.config || { count: 0 };\n\n    console.debug(\n        \"üîç fynapp-2-react18: Available middleware APIs:\",\n        Array.from(runtime?.middlewareContext?.keys() || [])\n    );\n    console.debug(\"üîç fynapp-2-react18: Middleware config:\", middlewareConfig);\n\n    // Render the main App component\n    return React.createElement(App, {\n        appName: fynApp?.name || 'fynapp-2-react18',\n        components: componentLibrary!, // Non-null assertion since we return early if null\n        middlewareConfig,\n        runtime\n    });\n}\n"],"names":["ReactDOM","createRoot","ReactDOMClient","default","exports","type","component","fynApp","runtime","componentLibrary","setComponentLibrary","React","useState","loading","setLoading","error","setError","useEffect","async","console","debug","library","preloadComponents","err","message","loadComponents","createElement","style","padding","textAlign","key","marginTop","display","width","height","border","borderTop","borderRadius","animation","color","backgroundColor","onClick","window","location","reload","basicCounterData","middlewareContext","get","middlewareConfig","config","count","Array","from","keys","App","appName","name","components","react","reactDOM","metadata","version","description"],"mappings":"+XAMA,MAAMA,EAAW,CACbC,WAAYC,EAAeD,YAAcC,EAAeC,SAASF,YAI5CG,EAAA,YAAA,CACrBC,KAAM,QACNC,UAWJ,UAAiCC,OAAEA,EAAMC,QAAEA,IACvC,MAAOC,EAAkBC,GAAuBC,EAAMC,SAAkC,OACjFC,EAASC,GAAcH,EAAMC,UAAS,IACtCG,EAAOC,GAAYL,EAAMC,SAAwB,MAoBxD,GAlBAD,EAAMM,WAAU,MACZC,iBACI,IACIC,QAAQC,MAAM,kDACd,MAAMC,QAAgBC,IACtBZ,EAAoBW,GACpBF,QAAQC,MAAM,2DAChB,MAAOG,GACLJ,QAAQJ,MAAM,4CAA6CQ,GAC3DP,EAAUO,EAAcC,SAClB,QACNV,GAAW,IAInBW,EAAgB,GACjB,IAECZ,EACA,OAAOF,EAAMe,cAAc,MAAO,CAC9BC,MAAO,CAAEC,QAAS,OAAQC,UAAW,WACtC,CACClB,EAAMe,cAAc,KAAM,CAAEI,IAAK,SAAW,2CAC5CnB,EAAMe,cAAc,MAAO,CACvBI,IAAK,UACLH,MAAO,CACHI,UAAW,OACXC,QAAS,eACTC,MAAO,OACPC,OAAQ,OACRC,OAAQ,oBACRC,UAAW,oBACXC,aAAc,MACdC,UAAW,+BAM3B,GAAIvB,EACA,OAAOJ,EAAMe,cAAc,MAAO,CAC9BC,MAAO,CACHC,QAAS,OACTW,MAAO,UACPC,gBAAiB,UACjBL,OAAQ,oBACRE,aAAc,QAEnB,CACC1B,EAAMe,cAAc,KAAM,CAAEI,IAAK,SAAW,4BAC5CnB,EAAMe,cAAc,IAAK,CAAEI,IAAK,WAAa,oDAAoDf,KACjGJ,EAAMe,cAAc,SAAU,CAC1BI,IAAK,QACLW,QAAS,IAAMC,OAAOC,SAASC,UAChC,WAKX,MAAMC,EAAmBrC,GAASsC,mBAAmBC,IAAI,iBACnDC,EAAmBH,GAAkBI,QAAU,CAAEC,MAAO,GAS9D,OAPA/B,QAAQC,MACJ,kDACA+B,MAAMC,KAAK5C,GAASsC,mBAAmBO,QAAU,KAErDlC,QAAQC,MAAM,0CAA2C4B,GAGlDrC,EAAMe,cAAc4B,EAAK,CAC5BC,QAAShD,GAAQiD,MAAQ,mBACzBC,WAAYhD,EACZuC,mBACAxC,WAER,EA1FIkD,MAAO/C,EACPgD,SAAU3D,EACV4D,SAAU,CACNJ,KAAM,sBACNK,QAAS,QACTC,YAAa"}
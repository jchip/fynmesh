{"version":3,"file":"App-Vb4hJqlr.js","sources":["../../src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"esm-react\";\nimport type { ComponentLibrary } from \"./components\";\nimport type { FynModuleRuntime } from \"@fynmesh/kernel\";\n\ninterface AppProps {\n  appName: string;\n  components: ComponentLibrary;\n  middlewareConfig?: any;\n  runtime?: FynModuleRuntime;\n}\n\nconst App: React.FC<AppProps> = ({\n  appName,\n  components,\n  middlewareConfig,\n  runtime,\n}: AppProps) => {\n  const [showEffect, setShowEffect] = React.useState<boolean>(false);\n  const [clickCount, setClickCount] = React.useState<number>(0);\n  const [showModal, setShowModal] = React.useState<boolean>(false);\n  const [inputValue, setInputValue] = React.useState<string>(\"\");\n  const [count, setCount] = React.useState<number>(0);\n\n  // Basic counter state for middleware integration\n  const [counter, setCounter] = useState({\n    count: middlewareConfig?.count || 0,\n  });\n\n  // Function to get the shared data object from middleware context\n  const getSharedDataObject = () => {\n    if (runtime?.middlewareContext) {\n      const basicCounterData = runtime.middlewareContext.get(\"basic-counter\");\n      return basicCounterData; // Return the actual object, not a copy\n    }\n    return null;\n  };\n\n  // Function to read current count from the shared data object\n  const readCountFromSharedData = () => {\n    const sharedData = getSharedDataObject();\n    return sharedData?.config?.count || middlewareConfig?.count || 0;\n  };\n\n  // Set up event listener for counter changes from other apps\n  useEffect(() => {\n    const syncWithSharedData = () => {\n      const sharedCount = readCountFromSharedData();\n      setCounter({ count: sharedCount });\n    };\n\n    // Initial sync\n    syncWithSharedData();\n\n    // Set up event listener for changes from other apps\n    const handleCounterChange = (event: CustomEvent) => {\n      const { count, source } = event.detail;\n      if (source !== runtime?.fynApp?.name) {\n        // Only update if the change came from a different app\n        setCounter({ count });\n        console.debug(\n          `ðŸ”„ fynapp-2-react18: Received counter update from ${source}:`,\n          count\n        );\n      }\n    };\n\n    const sharedData = getSharedDataObject();\n    if (sharedData?.eventTarget) {\n      sharedData.eventTarget.addEventListener(\n        \"counterChanged\",\n        handleCounterChange\n      );\n\n      return () => {\n        sharedData.eventTarget.removeEventListener(\n          \"counterChanged\",\n          handleCounterChange\n        );\n      };\n    }\n  }, [runtime, middlewareConfig]);\n\n  // Destructure the components\n  const { Button, Card, Input, Modal, Alert, Badge, Spinner } = components;\n\n  const handleButtonClick = () => {\n    setShowEffect(true);\n    setClickCount((prev: number) => prev + 1);\n    setCount(count + 1); // Update the counter immediately for simplicity\n    setTimeout(() => setShowEffect(false), 1000);\n  };\n\n  // Basic counter handlers\n  const handleIncrement = () => {\n    const sharedData = getSharedDataObject();\n    if (sharedData?.increment) {\n      const newCount = sharedData.increment(runtime?.fynApp?.name);\n      // Update local state for immediate UI response\n      setCounter({ count: newCount });\n      console.debug(\"âœ… fynapp-2-react18: Counter incremented to:\", newCount);\n    }\n  };\n\n  const handleReset = () => {\n    const sharedData = getSharedDataObject();\n    if (sharedData?.reset) {\n      const newCount = sharedData.reset(runtime?.fynApp?.name);\n      // Update local state for immediate UI response\n      setCounter({ count: newCount });\n      console.debug(\"âœ… fynapp-2-react18: Counter reset to:\", newCount);\n    }\n  };\n\n  return (\n    <div style={{ padding: \"20px\", maxWidth: \"768px\", margin: \"0 auto\" }}>\n      <h2>\n        {appName}: React {React.version} using Components from fynapp-x1 v1\n      </h2>\n\n      {/* Basic Counter Section - NEW */}\n      {runtime && middlewareConfig && (\n        <Card\n          title=\"ðŸ”— Basic Counter (Middleware Consumer)\"\n          style={{ marginBottom: \"16px\" }}\n        >\n          <div style={{ padding: \"15px\" }}>\n            <div\n              style={{\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                gap: \"15px\",\n              }}\n            >\n              <div\n                style={{\n                  fontSize: \"28px\",\n                  fontWeight: \"bold\",\n                  color: \"#007bff\",\n                  minWidth: \"60px\",\n                  textAlign: \"center\",\n                }}\n              >\n                {counter.count}\n              </div>\n              <Button variant=\"primary\" onClick={handleIncrement}>\n                Increment\n              </Button>\n              <Button variant=\"outline\" onClick={handleReset}>\n                Reset\n              </Button>\n            </div>\n          </div>\n        </Card>\n      )}\n\n      <Alert variant=\"info\" style={{ marginBottom: \"16px\" }}>\n        Component counter: {count}\n      </Alert>\n\n      <Card\n        title=\"Example Card from fynapp-x1 v1\"\n        footer={\n          <div\n            style={{ display: \"flex\", justifyContent: \"flex-end\", gap: \"12px\" }}\n          >\n            <Button variant=\"outline\" onClick={() => setShowModal(true)}>\n              Open Modal\n            </Button>\n            <Button variant=\"primary\" onClick={handleButtonClick}>\n              Click Me ({clickCount})\n            </Button>\n          </div>\n        }\n      >\n        <p>This is a card component from fynapp-x1 version 1.0.0!</p>\n        <p>Try out different components below:</p>\n\n        <div style={{ marginBottom: \"20px\" }}>\n          <h4>Badges:</h4>\n          <div style={{ display: \"flex\", gap: \"12px\", marginTop: \"12px\" }}>\n            <Badge variant=\"default\">Default</Badge>\n            <Badge variant=\"primary\">Primary</Badge>\n            <Badge variant=\"success\">Success</Badge>\n            <Badge variant=\"warning\">Warning</Badge>\n            <Badge variant=\"danger\">Danger</Badge>\n          </div>\n        </div>\n\n        <div style={{ marginTop: \"20px\" }}>\n          <h4>Spinner examples:</h4>\n          <div\n            style={{\n              display: \"flex\",\n              gap: \"20px\",\n              alignItems: \"center\",\n              marginTop: \"12px\",\n            }}\n          >\n            <Spinner size=\"small\" color=\"primary\" />\n            <Spinner size=\"medium\" color=\"gray\" />\n            <Spinner size=\"large\" color=\"primary\" />\n          </div>\n        </div>\n      </Card>\n\n      {showEffect && (\n        <div\n          style={{\n            position: \"fixed\",\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            pointerEvents: \"none\",\n            zIndex: 1000,\n          }}\n        >\n          <div\n            style={{\n              position: \"absolute\",\n              width: \"150%\",\n              height: \"150%\",\n              borderRadius: \"50%\",\n              background:\n                \"radial-gradient(circle, rgba(99, 102, 241, 0.3) 0%, rgba(99, 102, 241, 0.1) 50%, transparent 100%)\",\n              animation: \"pulse 1s ease-in-out\",\n            }}\n          />\n          <div\n            style={{\n              fontSize: \"3rem\",\n              fontWeight: \"bold\",\n              color: \"#6366f1\",\n              textShadow: \"2px 2px 4px rgba(0,0,0,0.3)\",\n              animation: \"bounce 1s ease-in-out\",\n            }}\n          >\n            +1 Click!\n          </div>\n          <style>{`\n            @keyframes pulse {\n              0%, 100% { opacity: 1; transform: scale(1); }\n              50% { opacity: 0.7; transform: scale(1.05); }\n            }\n            @keyframes bounce {\n              0%, 20%, 53%, 80%, 100% { transform: translateY(0); }\n              40%, 43% { transform: translateY(-15px); }\n              70% { transform: translateY(-5px); }\n              90% { transform: translateY(-3px); }\n            }\n          `}</style>\n        </div>\n      )}\n\n      {showModal && (\n        <Modal\n          isOpen={showModal}\n          onClose={() => setShowModal(false)}\n          title=\"Example Modal (v1 components)\"\n          footer={\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"flex-end\",\n                gap: \"12px\",\n                padding: \"16px 20px\",\n              }}\n            >\n              <Button variant=\"outline\" onClick={() => setShowModal(false)}>\n                Cancel\n              </Button>\n              <Button variant=\"primary\" onClick={() => setShowModal(false)}>\n                Confirm\n              </Button>\n            </div>\n          }\n        >\n          <div style={{ padding: \"20px\" }}>\n            <p style={{ marginBottom: \"16px\" }}>\n              This is a modal component from fynapp-x1 version 1.0.0!\n            </p>\n            <Input\n              label=\"Example Input\"\n              value={inputValue}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                setInputValue(e.target.value)\n              }\n              placeholder=\"Type something...\"\n              helperText=\"This is a helper text\"\n            />\n          </div>\n        </Modal>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"],"names":["exports","appName","components","middlewareConfig","runtime","showEffect","setShowEffect","React","useState","clickCount","setClickCount","showModal","setShowModal","inputValue","setInputValue","count","setCount","counter","setCounter","getSharedDataObject","middlewareContext","get","useEffect","sharedCount","sharedData","config","readCountFromSharedData","syncWithSharedData","handleCounterChange","event","source","detail","fynApp","name","console","debug","eventTarget","addEventListener","removeEventListener","Button","Card","Input","Modal","Alert","Badge","Spinner","createElement","style","padding","maxWidth","margin","version","title","marginBottom","display","alignItems","justifyContent","gap","fontSize","fontWeight","color","minWidth","textAlign","variant","onClick","increment","newCount","reset","footer","prev","setTimeout","marginTop","size","position","top","left","right","bottom","pointerEvents","zIndex","width","height","borderRadius","background","animation","textShadow","isOpen","onClose","label","value","onChange","e","target","placeholder","helperText"],"mappings":"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"}
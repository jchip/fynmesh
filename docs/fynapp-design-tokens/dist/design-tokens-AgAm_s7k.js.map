{"version":3,"file":"design-tokens-AgAm_s7k.js","sources":["../node_modules/@fynmesh/kernel/lib/use-middleware.js","../src/middleware/design-tokens.ts"],"sourcesContent":["/**\n * mark some user code for middleware usage\n *\n * @param meta Information about the middleware\n * @param config Configuration for the middleware\n * @param user User code that uses the middleware\n * @returns A middleware usage object\n */\nexport const useMiddleware = (meta, user) => {\n    user.__middlewareMeta = [].concat(meta);\n    return user;\n};\nexport const noOpMiddlewareUser = {\n    initialize: () => { },\n    execute: () => { },\n};\n// example usage of useMiddleware\nexport const main = useMiddleware({\n    info: {\n        name: \"react-context\",\n        version: \"^1.0.0\",\n        provider: \"fynapp-react-lib\",\n    },\n    config: { theme: \"light\" },\n}, noOpMiddlewareUser);\n//# sourceMappingURL=use-middleware.js.map","import type { FynApp, FynAppMiddleware, FynAppMiddlewareCallContext } from \"@fynmesh/kernel\";\nimport { useMiddleware, noOpMiddlewareUser } from \"@fynmesh/kernel\";\nimport type {\n    DesignTokensData,\n    ThemeConfig,\n    DesignTokensMiddlewareConfig,\n    DesignTokensAPI\n} from \"../types\";\n\n// =============================================================================\n// Default Themes\n// =============================================================================\n\nconst defaultTokens: DesignTokensData = {\n    colors: {\n        primary: '#2563eb',\n        secondary: '#64748b',\n        success: '#059669',\n        warning: '#d97706',\n        danger: '#dc2626',\n        info: '#0284c7',\n        light: '#f8fafc',\n        dark: '#0f172a',\n        // FynApp specific colors\n        fynapp1: '#6366f1',\n        fynapp1b: '#10b981',\n        fynapp2: '#8b5cf6',\n        fynapp3: '#ff5733',\n        fynapp4: '#42b883',\n        fynapp5: '#673ab8',\n        fynapp6: '#4f46e5',\n        fynapp7: '#2D7FF9',\n    },\n    spacing: {\n        xs: '0.25rem',\n        sm: '0.5rem',\n        md: '1rem',\n        lg: '1.5rem',\n        xl: '2rem',\n        '2xl': '2.5rem',\n        '3xl': '3rem',\n    },\n    typography: {\n        sizes: {\n            xs: '0.75rem',\n            sm: '0.875rem',\n            base: '1rem',\n            lg: '1.125rem',\n            xl: '1.25rem',\n            '2xl': '1.5rem',\n            '3xl': '1.875rem',\n            '4xl': '2.25rem',\n            '5xl': '3rem',\n            '6xl': '3.75rem',\n        },\n        weights: {\n            thin: 100,\n            light: 300,\n            normal: 400,\n            medium: 500,\n            semibold: 600,\n            bold: 700,\n            extrabold: 800,\n            black: 900,\n        },\n        families: {\n            sans: 'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif',\n            serif: 'ui-serif, Georgia, Cambria, \"Times New Roman\", Times, serif',\n            mono: 'ui-monospace, SFMono-Regular, \"SF Mono\", Consolas, \"Liberation Mono\", Menlo, monospace',\n        },\n    },\n    shadows: {\n        sm: '0 1px 2px 0 rgb(0 0 0 / 0.05)',\n        md: '0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)',\n        lg: '0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)',\n        xl: '0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)',\n        '2xl': '0 25px 50px -12px rgb(0 0 0 / 0.25)',\n        inner: 'inset 0 2px 4px 0 rgb(0 0 0 / 0.05)',\n        none: '0 0 #0000',\n    },\n    borders: {\n        radius: {\n            none: '0px',\n            sm: '0.125rem',\n            md: '0.375rem',\n            lg: '0.5rem',\n            xl: '0.75rem',\n            '2xl': '1rem',\n            '3xl': '1.5rem',\n            full: '9999px',\n        },\n        width: {\n            0: '0px',\n            1: '1px',\n            2: '2px',\n            4: '4px',\n            8: '8px',\n        },\n    },\n    breakpoints: {\n        sm: '640px',\n        md: '768px',\n        lg: '1024px',\n        xl: '1280px',\n        '2xl': '1536px',\n    },\n};\n\nconst predefinedThemes: Record<string, ThemeConfig> = {\n    'fynmesh-default': {\n        name: 'FynMesh Default',\n        tokens: defaultTokens,\n        cssCustomProperties: true,\n        cssVariablePrefix: 'fynmesh',\n    },\n    'fynmesh-dark': {\n        name: 'FynMesh Dark',\n        tokens: {\n            ...defaultTokens,\n            colors: {\n                ...defaultTokens.colors,\n                primary: '#3b82f6',\n                secondary: '#6b7280',\n                success: '#10b981',\n                warning: '#f59e0b',\n                danger: '#ef4444',\n                info: '#06b6d4',\n                light: '#1e293b',\n                dark: '#f1f5f9',\n                fynapp1: '#7c3aed',\n                fynapp1b: '#059669',\n                fynapp2: '#a855f7',\n                fynapp3: '#e11d48',\n                fynapp4: '#059669',\n                fynapp5: '#8b5cf6',\n                fynapp6: '#6366f1',\n                fynapp7: '#0ea5e9',\n            },\n        },\n        cssCustomProperties: true,\n        cssVariablePrefix: 'fynmesh',\n    },\n    'fynmesh-blue': {\n        name: 'FynMesh Blue',\n        tokens: {\n            ...defaultTokens,\n            colors: {\n                ...defaultTokens.colors,\n                primary: '#1e40af',\n                secondary: '#3b82f6',\n                success: '#059669',\n                warning: '#d97706',\n                danger: '#dc2626',\n                info: '#0284c7',\n                light: '#eff6ff',\n                dark: '#1e3a8a',\n                fynapp1: '#1e40af',\n                fynapp1b: '#3b82f6',\n                fynapp2: '#6366f1',\n                fynapp3: '#0ea5e9',\n                fynapp4: '#06b6d4',\n                fynapp5: '#8b5cf6',\n                fynapp6: '#1e40af',\n                fynapp7: '#0284c7',\n            },\n        },\n        cssCustomProperties: true,\n        cssVariablePrefix: 'fynmesh',\n    },\n    'fynmesh-green': {\n        name: 'FynMesh Green',\n        tokens: {\n            ...defaultTokens,\n            colors: {\n                ...defaultTokens.colors,\n                primary: '#059669',\n                secondary: '#10b981',\n                success: '#22c55e',\n                warning: '#eab308',\n                danger: '#ef4444',\n                info: '#06b6d4',\n                light: '#f0fdf4',\n                dark: '#064e3b',\n                fynapp1: '#059669',\n                fynapp1b: '#10b981',\n                fynapp2: '#22c55e',\n                fynapp3: '#84cc16',\n                fynapp4: '#65a30d',\n                fynapp5: '#16a34a',\n                fynapp6: '#059669',\n                fynapp7: '#0d9488',\n            },\n        },\n        cssCustomProperties: true,\n        cssVariablePrefix: 'fynmesh',\n    },\n    'fynmesh-purple': {\n        name: 'FynMesh Purple',\n        tokens: {\n            ...defaultTokens,\n            colors: {\n                ...defaultTokens.colors,\n                primary: '#7c3aed',\n                secondary: '#8b5cf6',\n                success: '#10b981',\n                warning: '#f59e0b',\n                danger: '#ef4444',\n                info: '#06b6d4',\n                light: '#faf5ff',\n                dark: '#581c87',\n                fynapp1: '#7c3aed',\n                fynapp1b: '#8b5cf6',\n                fynapp2: '#a855f7',\n                fynapp3: '#c084fc',\n                fynapp4: '#d8b4fe',\n                fynapp5: '#9333ea',\n                fynapp6: '#7c3aed',\n                fynapp7: '#6d28d9',\n            },\n        },\n        cssCustomProperties: true,\n        cssVariablePrefix: 'fynmesh',\n    },\n    'fynmesh-sunset': {\n        name: 'FynMesh Sunset',\n        tokens: {\n            ...defaultTokens,\n            colors: {\n                ...defaultTokens.colors,\n                primary: '#ea580c',\n                secondary: '#f97316',\n                success: '#10b981',\n                warning: '#eab308',\n                danger: '#ef4444',\n                info: '#06b6d4',\n                light: '#fff7ed',\n                dark: '#7c2d12',\n                fynapp1: '#ea580c',\n                fynapp1b: '#f97316',\n                fynapp2: '#fb923c',\n                fynapp3: '#fed7aa',\n                fynapp4: '#fdba74',\n                fynapp5: '#dc2626',\n                fynapp6: '#ea580c',\n                fynapp7: '#c2410c',\n            },\n        },\n        cssCustomProperties: true,\n        cssVariablePrefix: 'fynmesh',\n    },\n    'fynmesh-cyberpunk': {\n        name: 'FynMesh Cyberpunk',\n        tokens: {\n            ...defaultTokens,\n            colors: {\n                ...defaultTokens.colors,\n                primary: '#00ff88',\n                secondary: '#ff0080',\n                success: '#00ff88',\n                warning: '#ffff00',\n                danger: '#ff0040',\n                info: '#00ddff',\n                light: '#0a0a0a',\n                dark: '#00ff88',\n                fynapp1: '#00ff88',\n                fynapp1b: '#ff0080',\n                fynapp2: '#8000ff',\n                fynapp3: '#ff0040',\n                fynapp4: '#00ddff',\n                fynapp5: '#ff8000',\n                fynapp6: '#00ff88',\n                fynapp7: '#4080ff',\n            },\n        },\n        cssCustomProperties: true,\n        cssVariablePrefix: 'fynmesh',\n    },\n};\n\n// =============================================================================\n// Design Tokens Core Class\n// =============================================================================\n\nexport class DesignTokens {\n    private globalTheme: string = 'fynmesh-default';\n    private perFynAppThemes = new Map<string, string>(); // fynAppName -> theme\n    private customThemes = new Map<string, ThemeConfig>();\n    private themeChangeSubscribers = new Set<(theme: string, tokens: DesignTokensData, fynAppName?: string) => void>();\n    private styleElements = new Map<string, HTMLStyleElement>();\n    private fynAppConfigs = new Map<string, { prefix: string; isGlobal: boolean }>();\n\n    constructor() {\n        // Initialize with predefined themes\n        Object.entries(predefinedThemes).forEach(([key, theme]) => {\n            this.customThemes.set(key, theme);\n        });\n\n        // Load persisted theme\n        this.loadPersistedTheme();\n    }\n\n    public getTokens(fynAppName?: string): DesignTokensData {\n        const themeToUse = fynAppName && this.perFynAppThemes.has(fynAppName)\n            ? this.perFynAppThemes.get(fynAppName)!\n            : this.globalTheme;\n        const theme = this.customThemes.get(themeToUse);\n        return theme?.tokens || defaultTokens;\n    }\n\n    public getTheme(fynAppName?: string): string {\n        return fynAppName && this.perFynAppThemes.has(fynAppName)\n            ? this.perFynAppThemes.get(fynAppName)!\n            : this.globalTheme;\n    }\n\n    public setTheme(themeName: string, fynAppName?: string, applyGlobally: boolean = true): void {\n        if (!this.customThemes.has(themeName)) {\n            console.warn(`🚨 Theme \"${themeName}\" not found. Available themes:`, Array.from(this.customThemes.keys()));\n            return;\n        }\n\n        if (applyGlobally || !fynAppName) {\n            // Apply globally\n            this.globalTheme = themeName;\n            this.perFynAppThemes.clear(); // Clear per-app themes when going global\n            this.updateAllCSSCustomProperties();\n\n            // Notify all subscribers\n            const tokens = this.getTokens();\n            this.themeChangeSubscribers.forEach(callback => {\n                try {\n                    callback(themeName, tokens);\n                } catch (error) {\n                    console.error('Error in theme change callback:', error);\n                }\n            });\n        } else {\n            // Apply to specific fynapp only\n            this.perFynAppThemes.set(fynAppName, themeName);\n            this.updateFynAppCSSCustomProperties(fynAppName);\n\n            // Notify subscribers for this specific fynapp\n            const tokens = this.getTokens(fynAppName);\n            this.themeChangeSubscribers.forEach(callback => {\n                try {\n                    callback(themeName, tokens, fynAppName);\n                } catch (error) {\n                    console.error('Error in theme change callback:', error);\n                }\n            });\n        }\n\n        // Persist theme\n        this.persistTheme();\n\n        console.debug(`🎨 Theme changed to: ${themeName}${fynAppName && !applyGlobally ? ` for ${fynAppName}` : ' globally'}`);\n    }\n\n    public registerTheme(theme: ThemeConfig): void {\n        this.customThemes.set(theme.name, theme);\n        console.debug(`🎨 Registered theme: ${theme.name}`);\n    }\n\n    public getCSSVariable(tokenPath: string, prefix: string = 'fynmesh'): string {\n        return `var(--${prefix}-${tokenPath})`;\n    }\n\n    public subscribeToThemeChanges(callback: (theme: string, tokens: DesignTokensData) => void): () => void {\n        this.themeChangeSubscribers.add(callback);\n        return () => this.themeChangeSubscribers.delete(callback);\n    }\n\n    public injectCustomCSS(css: string, id: string): void {\n        let styleElement = document.getElementById(id) as HTMLStyleElement;\n\n        if (!styleElement) {\n            styleElement = document.createElement('style');\n            styleElement.id = id;\n            document.head.appendChild(styleElement);\n        }\n\n        styleElement.textContent = css;\n    }\n\n    public injectCSSCustomProperties(fynAppName: string, prefix: string = 'fynmesh', isGlobal: boolean = false): void {\n        const tokens = this.getTokens();\n        const scope = isGlobal ? ':root' : `#${fynAppName}`;\n        const css = this.generateCSSCustomProperties(tokens, prefix, scope);\n\n        const styleId = `fynmesh-design-tokens-${fynAppName}`;\n        let styleElement = document.getElementById(styleId) as HTMLStyleElement;\n\n        if (!styleElement) {\n            styleElement = document.createElement('style');\n            styleElement.id = styleId;\n            document.head.appendChild(styleElement);\n            this.styleElements.set(styleId, styleElement);\n        }\n\n        styleElement.textContent = css;\n\n        // Store the configuration for this fynapp\n        this.fynAppConfigs.set(fynAppName, { prefix, isGlobal });\n    }\n\n    private generateCSSCustomProperties(tokens: DesignTokensData, prefix: string, scope: string = ':root'): string {\n        const lines: string[] = [`${scope} {`];\n\n        // Colors\n        Object.entries(tokens.colors).forEach(([key, value]) => {\n            lines.push(`  --${prefix}-color-${key}: ${value};`);\n        });\n\n        // Spacing\n        Object.entries(tokens.spacing).forEach(([key, value]) => {\n            lines.push(`  --${prefix}-spacing-${key}: ${value};`);\n        });\n\n        // Typography\n        Object.entries(tokens.typography.sizes).forEach(([key, value]) => {\n            lines.push(`  --${prefix}-text-${key}: ${value};`);\n        });\n\n        Object.entries(tokens.typography.weights).forEach(([key, value]) => {\n            lines.push(`  --${prefix}-font-weight-${key}: ${value};`);\n        });\n\n        Object.entries(tokens.typography.families).forEach(([key, value]) => {\n            lines.push(`  --${prefix}-font-family-${key}: ${value};`);\n        });\n\n        // Shadows\n        Object.entries(tokens.shadows).forEach(([key, value]) => {\n            lines.push(`  --${prefix}-shadow-${key}: ${value};`);\n        });\n\n        // Borders\n        Object.entries(tokens.borders.radius).forEach(([key, value]) => {\n            lines.push(`  --${prefix}-radius-${key}: ${value};`);\n        });\n\n        Object.entries(tokens.borders.width).forEach(([key, value]) => {\n            lines.push(`  --${prefix}-border-${key}: ${value};`);\n        });\n\n        // Breakpoints\n        Object.entries(tokens.breakpoints).forEach(([key, value]) => {\n            lines.push(`  --${prefix}-breakpoint-${key}: ${value};`);\n        });\n\n        lines.push('}');\n\n        return lines.join('\\n');\n    }\n\n    private updateAllCSSCustomProperties(): void {\n        this.styleElements.forEach((styleElement, styleId) => {\n            const fynAppName = styleId.replace('fynmesh-design-tokens-', '');\n            const config = this.fynAppConfigs.get(fynAppName);\n\n            if (config) {\n                const tokens = this.getTokens(fynAppName);\n                const scope = config.isGlobal ? ':root' : `#${fynAppName}`;\n                const css = this.generateCSSCustomProperties(tokens, config.prefix, scope);\n                styleElement.textContent = css;\n            }\n        });\n    }\n\n    private updateFynAppCSSCustomProperties(fynAppName: string): void {\n        const styleId = `fynmesh-design-tokens-${fynAppName}`;\n        const styleElement = this.styleElements.get(styleId);\n        const config = this.fynAppConfigs.get(fynAppName);\n\n        if (styleElement && config) {\n            const tokens = this.getTokens(fynAppName);\n            const scope = config.isGlobal ? ':root' : `#${fynAppName}`;\n            const css = this.generateCSSCustomProperties(tokens, config.prefix, scope);\n            styleElement.textContent = css;\n        }\n    }\n\n    private loadPersistedTheme(): void {\n        try {\n            if (typeof window !== 'undefined' && window.localStorage) {\n                const saved = localStorage.getItem('fynmesh-theme');\n                if (saved && this.customThemes.has(saved)) {\n                    this.globalTheme = saved;\n                }\n\n                // Load per-fynapp themes\n                const perAppThemes = localStorage.getItem('fynmesh-per-app-themes');\n                if (perAppThemes) {\n                    const parsed = JSON.parse(perAppThemes);\n                    Object.entries(parsed).forEach(([fynAppName, theme]) => {\n                        if (typeof theme === 'string' && this.customThemes.has(theme)) {\n                            this.perFynAppThemes.set(fynAppName, theme);\n                        }\n                    });\n                }\n            }\n        } catch (error) {\n            console.warn('Failed to load persisted theme:', error);\n        }\n    }\n\n    private persistTheme(): void {\n        try {\n            if (typeof window !== 'undefined' && window.localStorage) {\n                localStorage.setItem('fynmesh-theme', this.globalTheme);\n\n                // Persist per-fynapp themes\n                const perAppThemes = Object.fromEntries(this.perFynAppThemes.entries());\n                localStorage.setItem('fynmesh-per-app-themes', JSON.stringify(perAppThemes));\n            }\n        } catch (error) {\n            console.warn('Failed to persist theme:', error);\n        }\n    }\n\n    // Public API for debugging\n    public listThemes(): string[] {\n        return Array.from(this.customThemes.keys());\n    }\n\n    public getThemeConfig(themeName: string): ThemeConfig | undefined {\n        return this.customThemes.get(themeName);\n    }\n}\n\n// =============================================================================\n// Design Tokens Middleware Implementation\n// =============================================================================\n\nexport class DesignTokensMiddleware implements FynAppMiddleware {\n    public readonly name = \"design-tokens\";\n\n    private designTokens: DesignTokens;\n    private fynAppConfigs = new WeakMap<FynApp, DesignTokensMiddlewareConfig>();\n\n    constructor() {\n        this.designTokens = new DesignTokens();\n    }\n\n    async setup(context: FynAppMiddlewareCallContext): Promise<{ status: string }> {\n        const { fynApp, meta } = context;\n        const config = this.validateConfig(meta.config);\n\n        this.fynAppConfigs.set(fynApp, config);\n\n        console.debug(`🎨 Design Tokens Middleware setup for ${fynApp.name}`);\n        return { status: \"ready\" };\n    }\n\n    async apply(context: FynAppMiddlewareCallContext): Promise<void> {\n        const { fynApp, runtime } = context;\n        const config = this.fynAppConfigs.get(fynApp)!;\n\n        // Set up theme if specified\n        if (config.theme) {\n            if (typeof config.theme === 'string') {\n                this.designTokens.setTheme(config.theme);\n            } else {\n                this.designTokens.registerTheme(config.theme);\n                this.designTokens.setTheme(config.theme.name);\n            }\n        }\n\n        // Inject CSS custom properties if enabled\n        if (config.cssCustomProperties !== false) {\n            this.designTokens.injectCSSCustomProperties(\n                fynApp.name,\n                config.cssVariablePrefix || 'fynmesh',\n                config.global || false\n            );\n        }\n\n        // Create API for this FynApp\n        const api = this.createDesignTokensAPI(fynApp, config);\n\n        // Store design tokens instance and API in middleware context\n        runtime.middlewareContext.set(this.name, {\n            designTokens: this.designTokens,\n            api,\n            tokens: this.designTokens.getTokens(),\n            theme: this.designTokens.getTheme(),\n        });\n\n        // Expose global API\n        this.exposeGlobalAPI(fynApp, api);\n\n        console.debug(`✅ Design Tokens Middleware applied to ${fynApp.name}`);\n    }\n\n    private validateConfig(config: any): DesignTokensMiddlewareConfig {\n        return {\n            theme: config?.theme || 'fynmesh-default',\n            customTokens: config?.customTokens || {},\n            cssCustomProperties: config?.cssCustomProperties !== false,\n            cssVariablePrefix: config?.cssVariablePrefix || 'fynmesh',\n            enableThemeSwitching: config?.enableThemeSwitching !== false,\n            persistTheme: config?.persistTheme !== false,\n            storageKey: config?.storageKey || 'fynmesh-theme',\n            global: config?.global || false,\n        };\n    }\n\n    private createDesignTokensAPI(fynApp: FynApp, config: DesignTokensMiddlewareConfig): DesignTokensAPI {\n        return {\n            getTokens: () => this.designTokens.getTokens(fynApp.name),\n            getTheme: () => this.designTokens.getTheme(fynApp.name),\n            setTheme: (theme: string, applyGlobally: boolean = true) => this.designTokens.setTheme(theme, fynApp.name, applyGlobally),\n            getCSSVariable: (tokenPath: string) => {\n                const prefix = config.cssVariablePrefix || 'fynmesh';\n                return this.designTokens.getCSSVariable(tokenPath, prefix);\n            },\n            subscribeToThemeChanges: (callback: (theme: string, tokens: DesignTokensData, fynAppName?: string) => void) => {\n                return this.designTokens.subscribeToThemeChanges(callback);\n            },\n            injectCustomCSS: (css: string) => {\n                const styleId = `fynmesh-custom-css-${fynApp.name}`;\n                this.designTokens.injectCustomCSS(css, styleId);\n            },\n        };\n    }\n\n    private exposeGlobalAPI(fynApp: FynApp, api: DesignTokensAPI): void {\n        // Expose API globally for easy access\n        if (typeof window !== 'undefined') {\n            (window as any).fynMeshDesignTokens = api;\n        }\n\n        // Also expose on the FynApp object\n        (fynApp as any).designTokens = api;\n    }\n}\n\n// Export the middleware instance\nexport const __middleware__DesignTokens = new DesignTokensMiddleware();\n\n// Simple main that just loads the middleware\nexport const main = useMiddleware(\n    {\n        info: {\n            name: \"design-tokens\",\n            provider: \"fynapp-design-tokens\",\n            version: \"^1.0.0\",\n        },\n        config: {\n            theme: \"fynmesh-default\",\n            cssCustomProperties: true,\n            cssVariablePrefix: \"fynmesh\",\n        },\n    },\n    noOpMiddlewareUser,\n);\n"],"names":["useMiddleware","meta","user","__middlewareMeta","concat","noOpMiddlewareUser","initialize","execute","info","name","version","provider","config","theme","defaultTokens","colors","primary","secondary","success","warning","danger","light","dark","fynapp1","fynapp1b","fynapp2","fynapp3","fynapp4","fynapp5","fynapp6","fynapp7","spacing","xs","sm","md","lg","xl","typography","sizes","base","weights","thin","normal","medium","semibold","bold","extrabold","black","families","sans","serif","mono","shadows","inner","none","borders","radius","full","width","breakpoints","predefinedThemes","tokens","cssCustomProperties","cssVariablePrefix","DesignTokens","constructor","this","globalTheme","perFynAppThemes","Map","customThemes","themeChangeSubscribers","Set","styleElements","fynAppConfigs","Object","entries","forEach","key","set","loadPersistedTheme","getTokens","fynAppName","themeToUse","has","get","getTheme","setTheme","themeName","applyGlobally","clear","updateAllCSSCustomProperties","callback","error","console","updateFynAppCSSCustomProperties","persistTheme","debug","warn","Array","from","keys","registerTheme","getCSSVariable","tokenPath","prefix","subscribeToThemeChanges","add","delete","injectCustomCSS","css","id","styleElement","document","getElementById","createElement","head","appendChild","textContent","injectCSSCustomProperties","isGlobal","scope","generateCSSCustomProperties","styleId","lines","value","push","join","replace","window","localStorage","saved","getItem","perAppThemes","parsed","JSON","parse","setItem","fromEntries","stringify","listThemes","getThemeConfig","exports","DesignTokensMiddleware","WeakMap","designTokens","setup","context","fynApp","validateConfig","status","apply","runtime","global","api","createDesignTokensAPI","middlewareContext","exposeGlobalAPI","customTokens","enableThemeSwitching","storageKey","fynMeshDesignTokens"],"mappings":"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","x_google_ignoreList":[0]}
globalThis.Federation._mfBind({n:"main",f:"main-Bysg-Gy3.js",c:"fynapp-react-middleware",s:"fynmesh",e:!1,v:"1.0.0"},["src"]).register(["./react-context-vqKz4Z2O.js","esm-react"],function(e){"use strict";var n;return{setters:[function(e){n=e.ReactContextMiddleware},null],execute:function(){e("__middleware__ReactContext",new n),e("__middleware__BasicCounter",{name:"basic-counter",async setup(e){var n;const t=e.runtime.middlewareContext;let s="defer";const a=e.meta.config;if("consume-only"!==a){const n=`${e.reg.fullKey}-${e.fynApp.name}@${e.fynApp.version}`,i={count:0,...a},o=new EventTarget,c=t.get(this.name)||{initialConfig:i,config:{...i},eventTarget:o,increment(e){this.config.count++;const n=new CustomEvent("counterChanged",{detail:{count:this.config.count,source:e||"unknown"}});return this.eventTarget.dispatchEvent(n),this.config.count},reset(e){this.config.count=this.initialConfig.count;const n=new CustomEvent("counterChanged",{detail:{count:this.config.count,source:e||"unknown"}});return this.eventTarget.dispatchEvent(n),this.config.count},setCount(e,n){this.config.count=e;const t=new CustomEvent("counterChanged",{detail:{count:this.config.count,source:n||"unknown"}});return this.eventTarget.dispatchEvent(t),this.config.count}};t.set(this.name,c),e.reg.hostFynApp.middlewareContext.set(n,c),s="ready";const r=e.kernel;if("function"==typeof r.signalMiddlewareReady)await r.signalMiddlewareReady(e,{name:this.name,status:s,share:{shareKey:n}});else{const t=new CustomEvent("MIDDLEWARE_READY",{detail:{name:this.name,share:{shareKey:n},status:s,cc:e}});e.kernel.emitAsync(t)}console.debug("üîç fynapp-react-middleware: Basic counter ready event dispatched now:",Date.now())}else{const a=null===(n=e.runtime.share)||void 0===n?void 0:n.shareKey;console.debug("üîç fynapp-react-middleware: basic counter shareKey:",a,e.runtime);const i=e.reg.hostFynApp.middlewareContext.get(a);if(i){t.set(this.name,i),s="ready";const n=e.kernel;if("function"==typeof n.signalMiddlewareReady)await n.signalMiddlewareReady(e,{name:this.name,status:s,share:{shareKey:a}});else{const n=new CustomEvent("MIDDLEWARE_READY",{detail:{name:this.name,share:{shareKey:a},status:s,cc:e}});e.kernel.emitAsync(n)}console.debug("üîç fynapp-react-middleware: Basic counter ready event dispatched for consumer now:",Date.now())}console.debug(`üîç fynapp-react-middleware: status: ${s} Basic counter setup for`,e.fynApp.name,e.fynApp.version,"is consume-only now:",Date.now())}return{status:s}},apply(e){}})}}});
//# sourceMappingURL=main-Bysg-Gy3.js.map

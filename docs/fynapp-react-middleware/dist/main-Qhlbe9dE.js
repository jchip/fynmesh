globalThis.Federation._mfBind({n:"main",f:"main-Qhlbe9dE.js",c:"fynapp-react-middleware",s:"fynmesh",e:!1,v:"1.0.0"},["src"]).register(["./react-context-vqKz4Z2O.js","esm-react"],function(e){"use strict";var n;return{setters:[function(e){n=e.ReactContextMiddleware},null],execute:function(){e("__middleware__ReactContext",new n),e("__middleware__BasicCounter",{name:"basic-counter",async setup(e){var n;const t=e.runtime.middlewareContext;let a="defer";const s=e.meta.config;if("consume-only"!==s){const n=`${e.reg.fullKey}-${e.fynApp.name}@${e.fynApp.version}`,o={count:0,...s},i=new EventTarget,c=t.get(this.name)||{initialConfig:o,config:{...o},eventTarget:i,increment(e){this.config.count++;const n=new CustomEvent("counterChanged",{detail:{count:this.config.count,source:e||"unknown"}});return this.eventTarget.dispatchEvent(n),this.config.count},reset(e){this.config.count=this.initialConfig.count;const n=new CustomEvent("counterChanged",{detail:{count:this.config.count,source:e||"unknown"}});return this.eventTarget.dispatchEvent(n),this.config.count},setCount(e,n){this.config.count=e;const t=new CustomEvent("counterChanged",{detail:{count:this.config.count,source:n||"unknown"}});return this.eventTarget.dispatchEvent(t),this.config.count}};t.set(this.name,c),e.reg.hostFynApp.middlewareContext.set(n,c),a="ready";const r=e.kernel;if("function"==typeof r.signalMiddlewareReady)await r.signalMiddlewareReady(e,{name:this.name,status:a,share:{shareKey:n}});else{const t=new CustomEvent("MIDDLEWARE_READY",{detail:{name:this.name,share:{shareKey:n},status:a,cc:e}});e.kernel.emitAsync(t)}console.debug("üîç fynapp-react-middleware: Basic counter ready event dispatched now:",Date.now())}else{const s=null===(n=e.runtime.share)||void 0===n?void 0:n.shareKey;console.debug("üîç fynapp-react-middleware: basic counter shareKey:",s,e.runtime);const o=e.reg.hostFynApp.middlewareContext.get(s);if(o){t.set(this.name,o),a="ready";const n=e.kernel;if("function"==typeof n.signalMiddlewareReady)await n.signalMiddlewareReady(e,{name:this.name,status:a,share:{shareKey:s}});else{const n=new CustomEvent("MIDDLEWARE_READY",{detail:{name:this.name,share:{shareKey:s},status:a,cc:e}});e.kernel.emitAsync(n)}console.debug("üîç fynapp-react-middleware: Basic counter ready event dispatched for consumer now:",Date.now())}console.debug(`üîç fynapp-react-middleware: status: ${a} Basic counter setup for`,e.fynApp.name,e.fynApp.version,"is consume-only now:",Date.now())}return"consume-only"===e.meta.config&&"defer"===a&&console.debug(`‚è≥ fynapp-react-middleware: ${e.fynApp.name} waiting for provider (consume-only mode)`),{status:a}},apply(e){}})}}});
//# sourceMappingURL=main-Qhlbe9dE.js.map
